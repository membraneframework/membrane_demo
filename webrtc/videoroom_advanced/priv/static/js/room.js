/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/js/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../deps/membrane_rtc_engine/priv/static/index.js":
/*!********************************************************!*\
  !*** ../deps/membrane_rtc_engine/priv/static/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var I=Object.defineProperty,B=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var W=(i,e,t)=>e in i?I(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,D=(i,e)=>{for(var t in e||(e={}))K.call(e,t)&&W(i,t,e[t]);if(L)for(var t of L(e))Q.call(e,t)&&W(i,t,e[t]);return i},J=(i,e)=>B(i,F(e)),Y=i=>I(i,\"__esModule\",{value:!0});var Z=(i,e)=>{Y(i);for(var t in e)I(i,t,{get:e[t],enumerable:!0})};var m=(i,e,t)=>new Promise((a,r)=>{var d=n=>{try{c(t.next(n))}catch(l){r(l)}},o=n=>{try{c(t.throw(n))}catch(l){r(l)}},c=n=>n.done?a(n.value):Promise.resolve(n.value).then(d,o);c((t=t.apply(i,e)).next())});Z(exports,{MembraneWebRTC:()=>E});function N(i){return JSON.stringify(i)}function V(i){return JSON.parse(i)}function T(i,e){var t={type:i};return e&&(t=J(D({},t),{data:e})),t}var g,ee=new Uint8Array(16);function y(){if(!g&&(g=typeof crypto!=\"undefined\"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!=\"undefined\"&&typeof msCrypto.getRandomValues==\"function\"&&msCrypto.getRandomValues.bind(msCrypto),!g))throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");return g(ee)}var $=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function te(i){return typeof i==\"string\"&&$.test(i)}var G=te;var s=[];for(M=0;M<256;++M)s.push((M+256).toString(16).substr(1));var M;function ae(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(s[i[e+0]]+s[i[e+1]]+s[i[e+2]]+s[i[e+3]]+\"-\"+s[i[e+4]]+s[i[e+5]]+\"-\"+s[i[e+6]]+s[i[e+7]]+\"-\"+s[i[e+8]]+s[i[e+9]]+\"-\"+s[i[e+10]]+s[i[e+11]]+s[i[e+12]]+s[i[e+13]]+s[i[e+14]]+s[i[e+15]]).toLowerCase();if(!G(t))throw TypeError(\"Stringified UUID is invalid\");return t}var H=ae;function re(i,e,t){i=i||{};var a=i.random||(i.rng||y)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){t=t||0;for(var r=0;r<16;++r)e[t+r]=a[r];return e}return H(a)}var b=re;var E=class{constructor(e){this.localTracksWithStreams=[];this.trackIdToTrack=new Map;this.idToPeer=new Map;this.localPeer={id:\"\",metadata:{},trackIdToMetadata:new Map};this.localTrackIdToTrack=new Map;this.midToTrackId=new Map;this.rtcConfig={iceServers:[{urls:\"stun:stun.l.google.com:19302\"}]};this.join=e=>{var t,a;try{this.localPeer.metadata=e;let r=T(\"join\",{receiveMedia:this.receiveMedia,metadata:e});this.sendMediaEvent(r)}catch(r){(a=(t=this.callbacks).onConnectionError)==null||a.call(t,r),this.leave()}};this.receiveMediaEvent=e=>{var d,o,c,n,l,f,u,C,P,x,S,R,w,A;let t=V(e),a,r;switch(t.type){case\"peerAccepted\":this.localPeer.id=t.data.id,(o=(d=this.callbacks).onJoinSuccess)==null||o.call(d,t.data.id,t.data.peersInRoom),t.data.peersInRoom.forEach(k=>{this.addPeer(k)});break;case\"peerDenied\":(n=(c=this.callbacks).onJoinError)==null||n.call(c,t.data);break;case\"offerData\":let X=new Map(Object.entries(t.data));this.onOfferData(X);break;case\"tracksAdded\":if(r=t.data,this.getPeerId()===r.peerId)return;r.trackIdToMetadata=new Map(Object.entries(r.trackIdToMetadata)),a=this.idToPeer.get(r.peerId);let _=a.trackIdToMetadata;a.trackIdToMetadata=new Map([...a.trackIdToMetadata,...r.trackIdToMetadata]),this.idToPeer.set(a.id,a),Array.from(a.trackIdToMetadata.entries()).forEach(([k,h])=>{var p,v;if(!_.has(k)){let U={stream:null,track:null,trackId:k,metadata:h,peer:a};this.trackIdToTrack.set(k,U),(v=(p=this.callbacks).onTrackAdded)==null||v.call(p,U)}});break;case\"tracksRemoved\":r=t.data;let q=r.peerId;if(this.getPeerId()===r.peerId)return;r.trackIds.forEach(k=>{var p,v;let h=this.trackIdToTrack.get(k);(v=(p=this.callbacks).onTrackRemoved)==null||v.call(p,h),this.eraseTrack(k,q)});break;case\"sdpAnswer\":this.midToTrackId=new Map(Object.entries(t.data.midToTrackId)),this.onAnswer(t.data);break;case\"candidate\":this.onRemoteCandidate(t.data);break;case\"peerJoined\":if(a=t.data.peer,a.id===this.getPeerId())return;this.addPeer(a),(f=(l=this.callbacks).onPeerJoined)==null||f.call(l,a);break;case\"peerLeft\":if(a=this.idToPeer.get(t.data.peerId),a.id===this.getPeerId())return;Array.from(a.trackIdToMetadata.keys()).forEach(k=>{var h,p;return(p=(h=this.callbacks).onTrackRemoved)==null?void 0:p.call(h,this.trackIdToTrack.get(k))}),this.erasePeer(a),(C=(u=this.callbacks).onPeerLeft)==null||C.call(u,a);break;case\"peerUpdated\":if(this.getPeerId()===t.data.peerId)return;a=this.idToPeer.get(t.data.peerId),a.metadata=t.data.metadata,this.addPeer(a),(x=(P=this.callbacks).onPeerUpdated)==null||x.call(P,a);break;case\"trackUpdated\":if(this.getPeerId()===t.data.peerId)return;if(a=this.idToPeer.get(t.data.peerId),a==null)throw`Peer with id: ${t.data.peerId} doesn't exist`;let j=t.data.trackId,O=t.data.metadata;a.trackIdToMetadata.set(j,O);let z=this.trackIdToTrack.get(j);z.metadata=O,(R=(S=this.callbacks).onTrackUpdated)==null||R.call(S,z);break;case\"error\":(A=(w=this.callbacks).onConnectionError)==null||A.call(w,t.data.message),this.leave();break}};this.updatePeerMetadata=e=>{let t=T(\"updatePeerMetadata\",{metadata:e});this.sendMediaEvent(t)};this.updateTrackMetadata=(e,t)=>{let a=this.localTrackIdToTrack.get(e);a.metadata=t,this.localTrackIdToTrack.set(e,a),this.localPeer.trackIdToMetadata.set(e,t);let r=T(\"updateTrackMetadata\",{trackId:e,trackMetadata:t});this.sendMediaEvent(r)};this.getMidToTrackId=()=>{let e={};return this.connection?(this.connection.getTransceivers().forEach(t=>{var c;let a=(c=t.sender.track)==null?void 0:c.id,r=t.mid,d=this.localPeer.trackIdToMetadata.keys(),o=Array.from(d).map(n=>this.localTrackIdToTrack.get(n));if(a&&r){let n=o.find(l=>l.track.id===a);e[r]=n.trackId}}),e):null};this.leave=()=>{let e=T(\"leave\");this.sendMediaEvent(e),this.cleanUp()};this.cleanUp=()=>{this.connection&&(this.connection.onicecandidate=null,this.connection.ontrack=null),this.localTracksWithStreams.forEach(({track:e})=>e.stop()),this.localTracksWithStreams=[],this.connection=void 0};this.sendMediaEvent=e=>{this.callbacks.onSendMediaEvent(N(e))};this.onAnswer=e=>m(this,null,function*(){this.connection.ontrack=this.onTrack();try{yield this.connection.setRemoteDescription(e)}catch(t){console.log(t)}});this.addTransceiversIfNeeded=e=>{var c;let t=this.connection.getTransceivers().filter(n=>n.direction===\"recvonly\"),a=[],r=n=>{let l=e.get(n);l=l!==void 0?l:0;let f=t.filter(u=>u.receiver.track.kind===n).length;return Array(l-f).fill(n)},d=r(\"audio\"),o=r(\"video\");a=a.concat(d),a=a.concat(o);for(let n of a)(c=this.connection)==null||c.addTransceiver(n,{direction:\"recvonly\"})};this.getTrackIdToMetadata=()=>{let e={};return Array.from(this.localPeer.trackIdToMetadata.entries()).forEach(([t,a])=>{e[t]=a}),e};this.onOfferData=e=>m(this,null,function*(){this.connection?yield this.connection.restartIce():(this.connection=new RTCPeerConnection(this.rtcConfig),this.connection.onicecandidate=this.onLocalCandidate(),this.localTracksWithStreams.forEach(({track:t,stream:a})=>{this.connection.addTrack(t,a)}),this.connection.getTransceivers().forEach(t=>t.direction=\"sendonly\")),this.addTransceiversIfNeeded(e),yield this.createAndSendOffer()});this.onRemoteCandidate=e=>{try{let t=new RTCIceCandidate(e);if(!this.connection)throw new Error(\"Received new remote candidate but RTCConnection is undefined\");this.connection.addIceCandidate(t)}catch(t){console.error(t)}};this.onLocalCandidate=()=>e=>{if(e.candidate){let t=T(\"candidate\",{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex});this.sendMediaEvent(t)}};this.onTrack=()=>e=>{var n,l;let[t]=e.streams,a=e.transceiver.mid,r=this.midToTrackId.get(a),d=Array.from(this.idToPeer.values()).filter(f=>Array.from(f.trackIdToMetadata.keys()).includes(r))[0],o=d.trackIdToMetadata.get(r),c={stream:t,track:e.track,peer:d,trackId:r,metadata:o};this.trackIdToTrack.set(r,c),(l=(n=this.callbacks).onTrackReady)==null||l.call(n,c)};this.addPeer=e=>{e.trackIdToMetadata=new Map(Object.entries(e.trackIdToMetadata)),this.idToPeer.set(e.id,e)};this.erasePeer=e=>{let t=Array.from(e.trackIdToMetadata.keys());t.forEach(a=>this.trackIdToTrack.delete(a)),Array.from(this.midToTrackId.entries()).forEach(([a,r])=>{t.includes(r)&&this.midToTrackId.delete(a)}),this.idToPeer.delete(e.id)};this.eraseTrack=(e,t)=>{this.trackIdToTrack.delete(e);let a=Array.from(this.midToTrackId.entries()),[r,d]=a.find(([o,c])=>c===e);this.midToTrackId.delete(r),this.idToPeer.get(t).trackIdToMetadata.delete(e)};this.getPeerId=()=>this.localPeer.id;let{receiveMedia:t=!0,callbacks:a,rtcConfig:r}=e;this.receiveMedia=t,this.callbacks=a,this.rtcConfig=r||this.rtcConfig}addTrack(e,t,a=new Map){if(this.getPeerId()===\"\")throw\"Cannot add tracks before being accepted by the server\";let r=this.getTrackId(b());this.localTracksWithStreams.push({track:e,stream:t}),this.localPeer.trackIdToMetadata.set(r,a),this.localTrackIdToTrack.set(r,{track:e,stream:t,trackId:r,peer:this.localPeer,metadata:a}),this.connection&&(this.connection.addTrack(e,t),this.connection.getTransceivers().forEach(o=>o.direction=o.direction===\"sendrecv\"?\"sendonly\":o.direction));let d=T(\"renegotiateTracks\",{});return this.sendMediaEvent(d),r}replaceTrack(e,t,a){return m(this,null,function*(){let r=this.localTrackIdToTrack.get(e),d=this.findSender(r.track.id);return d?d.replaceTrack(t).then(()=>{let o=a||this.localTrackIdToTrack.get(e).metadata;return r.track=t,this.updateTrackMetadata(e,o),!0}).catch(()=>!1):!1})}removeTrack(e){let t=this.localTrackIdToTrack.get(e),a=this.findSender(t.track.id);this.connection.removeTrack(a);let r=T(\"renegotiateTracks\",{});this.sendMediaEvent(r)}findSender(e){return this.connection.getSenders().find(t=>t.track&&t.track.id===e)}getTrackId(e){return`${this.getPeerId()}:${e} `}createAndSendOffer(){return m(this,null,function*(){if(!!this.connection)try{let e=yield this.connection.createOffer();yield this.connection.setLocalDescription(e);let t=T(\"sdpOffer\",{sdpOffer:e,trackIdToTrackMetadata:this.getTrackIdToMetadata(),midToTrackId:this.getMidToTrackId()});this.sendMediaEvent(t)}catch(e){console.error(e)}})}};\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vZGVwcy9tZW1icmFuZV9ydGNfZW5naW5lL3ByaXYvc3RhdGljL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL2RlcHMvbWVtYnJhbmVfcnRjX2VuZ2luZS9wcml2L3N0YXRpYy9pbmRleC5qcz9hNGNkIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBJPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxCPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO3ZhciBGPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO3ZhciBMPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7dmFyIEs9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxRPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7dmFyIFc9KGksZSx0KT0+ZSBpbiBpP0koaSxlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSk6aVtlXT10LEQ9KGksZSk9Pntmb3IodmFyIHQgaW4gZXx8KGU9e30pKUsuY2FsbChlLHQpJiZXKGksdCxlW3RdKTtpZihMKWZvcih2YXIgdCBvZiBMKGUpKVEuY2FsbChlLHQpJiZXKGksdCxlW3RdKTtyZXR1cm4gaX0sSj0oaSxlKT0+QihpLEYoZSkpLFk9aT0+SShpLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBaPShpLGUpPT57WShpKTtmb3IodmFyIHQgaW4gZSlJKGksdCx7Z2V0OmVbdF0sZW51bWVyYWJsZTohMH0pfTt2YXIgbT0oaSxlLHQpPT5uZXcgUHJvbWlzZSgoYSxyKT0+e3ZhciBkPW49Pnt0cnl7Yyh0Lm5leHQobikpfWNhdGNoKGwpe3IobCl9fSxvPW49Pnt0cnl7Yyh0LnRocm93KG4pKX1jYXRjaChsKXtyKGwpfX0sYz1uPT5uLmRvbmU/YShuLnZhbHVlKTpQcm9taXNlLnJlc29sdmUobi52YWx1ZSkudGhlbihkLG8pO2MoKHQ9dC5hcHBseShpLGUpKS5uZXh0KCkpfSk7WihleHBvcnRzLHtNZW1icmFuZVdlYlJUQzooKT0+RX0pO2Z1bmN0aW9uIE4oaSl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGkpfWZ1bmN0aW9uIFYoaSl7cmV0dXJuIEpTT04ucGFyc2UoaSl9ZnVuY3Rpb24gVChpLGUpe3ZhciB0PXt0eXBlOml9O3JldHVybiBlJiYodD1KKEQoe30sdCkse2RhdGE6ZX0pKSx0fXZhciBnLGVlPW5ldyBVaW50OEFycmF5KDE2KTtmdW5jdGlvbiB5KCl7aWYoIWcmJihnPXR5cGVvZiBjcnlwdG8hPVwidW5kZWZpbmVkXCImJmNyeXB0by5nZXRSYW5kb21WYWx1ZXMmJmNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pfHx0eXBlb2YgbXNDcnlwdG8hPVwidW5kZWZpbmVkXCImJnR5cGVvZiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXM9PVwiZnVuY3Rpb25cIiYmbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pLCFnKSl0aHJvdyBuZXcgRXJyb3IoXCJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZFwiKTtyZXR1cm4gZyhlZSl9dmFyICQ9L14oPzpbMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMS01XVswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO2Z1bmN0aW9uIHRlKGkpe3JldHVybiB0eXBlb2YgaT09XCJzdHJpbmdcIiYmJC50ZXN0KGkpfXZhciBHPXRlO3ZhciBzPVtdO2ZvcihNPTA7TTwyNTY7KytNKXMucHVzaCgoTSsyNTYpLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSkpO3ZhciBNO2Z1bmN0aW9uIGFlKGkpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTowLHQ9KHNbaVtlKzBdXStzW2lbZSsxXV0rc1tpW2UrMl1dK3NbaVtlKzNdXStcIi1cIitzW2lbZSs0XV0rc1tpW2UrNV1dK1wiLVwiK3NbaVtlKzZdXStzW2lbZSs3XV0rXCItXCIrc1tpW2UrOF1dK3NbaVtlKzldXStcIi1cIitzW2lbZSsxMF1dK3NbaVtlKzExXV0rc1tpW2UrMTJdXStzW2lbZSsxM11dK3NbaVtlKzE0XV0rc1tpW2UrMTVdXSkudG9Mb3dlckNhc2UoKTtpZighRyh0KSl0aHJvdyBUeXBlRXJyb3IoXCJTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWRcIik7cmV0dXJuIHR9dmFyIEg9YWU7ZnVuY3Rpb24gcmUoaSxlLHQpe2k9aXx8e307dmFyIGE9aS5yYW5kb218fChpLnJuZ3x8eSkoKTtpZihhWzZdPWFbNl0mMTV8NjQsYVs4XT1hWzhdJjYzfDEyOCxlKXt0PXR8fDA7Zm9yKHZhciByPTA7cjwxNjsrK3IpZVt0K3JdPWFbcl07cmV0dXJuIGV9cmV0dXJuIEgoYSl9dmFyIGI9cmU7dmFyIEU9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5sb2NhbFRyYWNrc1dpdGhTdHJlYW1zPVtdO3RoaXMudHJhY2tJZFRvVHJhY2s9bmV3IE1hcDt0aGlzLmlkVG9QZWVyPW5ldyBNYXA7dGhpcy5sb2NhbFBlZXI9e2lkOlwiXCIsbWV0YWRhdGE6e30sdHJhY2tJZFRvTWV0YWRhdGE6bmV3IE1hcH07dGhpcy5sb2NhbFRyYWNrSWRUb1RyYWNrPW5ldyBNYXA7dGhpcy5taWRUb1RyYWNrSWQ9bmV3IE1hcDt0aGlzLnJ0Y0NvbmZpZz17aWNlU2VydmVyczpbe3VybHM6XCJzdHVuOnN0dW4ubC5nb29nbGUuY29tOjE5MzAyXCJ9XX07dGhpcy5qb2luPWU9Pnt2YXIgdCxhO3RyeXt0aGlzLmxvY2FsUGVlci5tZXRhZGF0YT1lO2xldCByPVQoXCJqb2luXCIse3JlY2VpdmVNZWRpYTp0aGlzLnJlY2VpdmVNZWRpYSxtZXRhZGF0YTplfSk7dGhpcy5zZW5kTWVkaWFFdmVudChyKX1jYXRjaChyKXsoYT0odD10aGlzLmNhbGxiYWNrcykub25Db25uZWN0aW9uRXJyb3IpPT1udWxsfHxhLmNhbGwodCxyKSx0aGlzLmxlYXZlKCl9fTt0aGlzLnJlY2VpdmVNZWRpYUV2ZW50PWU9Pnt2YXIgZCxvLGMsbixsLGYsdSxDLFAseCxTLFIsdyxBO2xldCB0PVYoZSksYSxyO3N3aXRjaCh0LnR5cGUpe2Nhc2VcInBlZXJBY2NlcHRlZFwiOnRoaXMubG9jYWxQZWVyLmlkPXQuZGF0YS5pZCwobz0oZD10aGlzLmNhbGxiYWNrcykub25Kb2luU3VjY2Vzcyk9PW51bGx8fG8uY2FsbChkLHQuZGF0YS5pZCx0LmRhdGEucGVlcnNJblJvb20pLHQuZGF0YS5wZWVyc0luUm9vbS5mb3JFYWNoKGs9Pnt0aGlzLmFkZFBlZXIoayl9KTticmVhaztjYXNlXCJwZWVyRGVuaWVkXCI6KG49KGM9dGhpcy5jYWxsYmFja3MpLm9uSm9pbkVycm9yKT09bnVsbHx8bi5jYWxsKGMsdC5kYXRhKTticmVhaztjYXNlXCJvZmZlckRhdGFcIjpsZXQgWD1uZXcgTWFwKE9iamVjdC5lbnRyaWVzKHQuZGF0YSkpO3RoaXMub25PZmZlckRhdGEoWCk7YnJlYWs7Y2FzZVwidHJhY2tzQWRkZWRcIjppZihyPXQuZGF0YSx0aGlzLmdldFBlZXJJZCgpPT09ci5wZWVySWQpcmV0dXJuO3IudHJhY2tJZFRvTWV0YWRhdGE9bmV3IE1hcChPYmplY3QuZW50cmllcyhyLnRyYWNrSWRUb01ldGFkYXRhKSksYT10aGlzLmlkVG9QZWVyLmdldChyLnBlZXJJZCk7bGV0IF89YS50cmFja0lkVG9NZXRhZGF0YTthLnRyYWNrSWRUb01ldGFkYXRhPW5ldyBNYXAoWy4uLmEudHJhY2tJZFRvTWV0YWRhdGEsLi4uci50cmFja0lkVG9NZXRhZGF0YV0pLHRoaXMuaWRUb1BlZXIuc2V0KGEuaWQsYSksQXJyYXkuZnJvbShhLnRyYWNrSWRUb01ldGFkYXRhLmVudHJpZXMoKSkuZm9yRWFjaCgoW2ssaF0pPT57dmFyIHAsdjtpZighXy5oYXMoaykpe2xldCBVPXtzdHJlYW06bnVsbCx0cmFjazpudWxsLHRyYWNrSWQ6ayxtZXRhZGF0YTpoLHBlZXI6YX07dGhpcy50cmFja0lkVG9UcmFjay5zZXQoayxVKSwodj0ocD10aGlzLmNhbGxiYWNrcykub25UcmFja0FkZGVkKT09bnVsbHx8di5jYWxsKHAsVSl9fSk7YnJlYWs7Y2FzZVwidHJhY2tzUmVtb3ZlZFwiOnI9dC5kYXRhO2xldCBxPXIucGVlcklkO2lmKHRoaXMuZ2V0UGVlcklkKCk9PT1yLnBlZXJJZClyZXR1cm47ci50cmFja0lkcy5mb3JFYWNoKGs9Pnt2YXIgcCx2O2xldCBoPXRoaXMudHJhY2tJZFRvVHJhY2suZ2V0KGspOyh2PShwPXRoaXMuY2FsbGJhY2tzKS5vblRyYWNrUmVtb3ZlZCk9PW51bGx8fHYuY2FsbChwLGgpLHRoaXMuZXJhc2VUcmFjayhrLHEpfSk7YnJlYWs7Y2FzZVwic2RwQW5zd2VyXCI6dGhpcy5taWRUb1RyYWNrSWQ9bmV3IE1hcChPYmplY3QuZW50cmllcyh0LmRhdGEubWlkVG9UcmFja0lkKSksdGhpcy5vbkFuc3dlcih0LmRhdGEpO2JyZWFrO2Nhc2VcImNhbmRpZGF0ZVwiOnRoaXMub25SZW1vdGVDYW5kaWRhdGUodC5kYXRhKTticmVhaztjYXNlXCJwZWVySm9pbmVkXCI6aWYoYT10LmRhdGEucGVlcixhLmlkPT09dGhpcy5nZXRQZWVySWQoKSlyZXR1cm47dGhpcy5hZGRQZWVyKGEpLChmPShsPXRoaXMuY2FsbGJhY2tzKS5vblBlZXJKb2luZWQpPT1udWxsfHxmLmNhbGwobCxhKTticmVhaztjYXNlXCJwZWVyTGVmdFwiOmlmKGE9dGhpcy5pZFRvUGVlci5nZXQodC5kYXRhLnBlZXJJZCksYS5pZD09PXRoaXMuZ2V0UGVlcklkKCkpcmV0dXJuO0FycmF5LmZyb20oYS50cmFja0lkVG9NZXRhZGF0YS5rZXlzKCkpLmZvckVhY2goaz0+e3ZhciBoLHA7cmV0dXJuKHA9KGg9dGhpcy5jYWxsYmFja3MpLm9uVHJhY2tSZW1vdmVkKT09bnVsbD92b2lkIDA6cC5jYWxsKGgsdGhpcy50cmFja0lkVG9UcmFjay5nZXQoaykpfSksdGhpcy5lcmFzZVBlZXIoYSksKEM9KHU9dGhpcy5jYWxsYmFja3MpLm9uUGVlckxlZnQpPT1udWxsfHxDLmNhbGwodSxhKTticmVhaztjYXNlXCJwZWVyVXBkYXRlZFwiOmlmKHRoaXMuZ2V0UGVlcklkKCk9PT10LmRhdGEucGVlcklkKXJldHVybjthPXRoaXMuaWRUb1BlZXIuZ2V0KHQuZGF0YS5wZWVySWQpLGEubWV0YWRhdGE9dC5kYXRhLm1ldGFkYXRhLHRoaXMuYWRkUGVlcihhKSwoeD0oUD10aGlzLmNhbGxiYWNrcykub25QZWVyVXBkYXRlZCk9PW51bGx8fHguY2FsbChQLGEpO2JyZWFrO2Nhc2VcInRyYWNrVXBkYXRlZFwiOmlmKHRoaXMuZ2V0UGVlcklkKCk9PT10LmRhdGEucGVlcklkKXJldHVybjtpZihhPXRoaXMuaWRUb1BlZXIuZ2V0KHQuZGF0YS5wZWVySWQpLGE9PW51bGwpdGhyb3dgUGVlciB3aXRoIGlkOiAke3QuZGF0YS5wZWVySWR9IGRvZXNuJ3QgZXhpc3RgO2xldCBqPXQuZGF0YS50cmFja0lkLE89dC5kYXRhLm1ldGFkYXRhO2EudHJhY2tJZFRvTWV0YWRhdGEuc2V0KGosTyk7bGV0IHo9dGhpcy50cmFja0lkVG9UcmFjay5nZXQoaik7ei5tZXRhZGF0YT1PLChSPShTPXRoaXMuY2FsbGJhY2tzKS5vblRyYWNrVXBkYXRlZCk9PW51bGx8fFIuY2FsbChTLHopO2JyZWFrO2Nhc2VcImVycm9yXCI6KEE9KHc9dGhpcy5jYWxsYmFja3MpLm9uQ29ubmVjdGlvbkVycm9yKT09bnVsbHx8QS5jYWxsKHcsdC5kYXRhLm1lc3NhZ2UpLHRoaXMubGVhdmUoKTticmVha319O3RoaXMudXBkYXRlUGVlck1ldGFkYXRhPWU9PntsZXQgdD1UKFwidXBkYXRlUGVlck1ldGFkYXRhXCIse21ldGFkYXRhOmV9KTt0aGlzLnNlbmRNZWRpYUV2ZW50KHQpfTt0aGlzLnVwZGF0ZVRyYWNrTWV0YWRhdGE9KGUsdCk9PntsZXQgYT10aGlzLmxvY2FsVHJhY2tJZFRvVHJhY2suZ2V0KGUpO2EubWV0YWRhdGE9dCx0aGlzLmxvY2FsVHJhY2tJZFRvVHJhY2suc2V0KGUsYSksdGhpcy5sb2NhbFBlZXIudHJhY2tJZFRvTWV0YWRhdGEuc2V0KGUsdCk7bGV0IHI9VChcInVwZGF0ZVRyYWNrTWV0YWRhdGFcIix7dHJhY2tJZDplLHRyYWNrTWV0YWRhdGE6dH0pO3RoaXMuc2VuZE1lZGlhRXZlbnQocil9O3RoaXMuZ2V0TWlkVG9UcmFja0lkPSgpPT57bGV0IGU9e307cmV0dXJuIHRoaXMuY29ubmVjdGlvbj8odGhpcy5jb25uZWN0aW9uLmdldFRyYW5zY2VpdmVycygpLmZvckVhY2godD0+e3ZhciBjO2xldCBhPShjPXQuc2VuZGVyLnRyYWNrKT09bnVsbD92b2lkIDA6Yy5pZCxyPXQubWlkLGQ9dGhpcy5sb2NhbFBlZXIudHJhY2tJZFRvTWV0YWRhdGEua2V5cygpLG89QXJyYXkuZnJvbShkKS5tYXAobj0+dGhpcy5sb2NhbFRyYWNrSWRUb1RyYWNrLmdldChuKSk7aWYoYSYmcil7bGV0IG49by5maW5kKGw9PmwudHJhY2suaWQ9PT1hKTtlW3JdPW4udHJhY2tJZH19KSxlKTpudWxsfTt0aGlzLmxlYXZlPSgpPT57bGV0IGU9VChcImxlYXZlXCIpO3RoaXMuc2VuZE1lZGlhRXZlbnQoZSksdGhpcy5jbGVhblVwKCl9O3RoaXMuY2xlYW5VcD0oKT0+e3RoaXMuY29ubmVjdGlvbiYmKHRoaXMuY29ubmVjdGlvbi5vbmljZWNhbmRpZGF0ZT1udWxsLHRoaXMuY29ubmVjdGlvbi5vbnRyYWNrPW51bGwpLHRoaXMubG9jYWxUcmFja3NXaXRoU3RyZWFtcy5mb3JFYWNoKCh7dHJhY2s6ZX0pPT5lLnN0b3AoKSksdGhpcy5sb2NhbFRyYWNrc1dpdGhTdHJlYW1zPVtdLHRoaXMuY29ubmVjdGlvbj12b2lkIDB9O3RoaXMuc2VuZE1lZGlhRXZlbnQ9ZT0+e3RoaXMuY2FsbGJhY2tzLm9uU2VuZE1lZGlhRXZlbnQoTihlKSl9O3RoaXMub25BbnN3ZXI9ZT0+bSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dGhpcy5jb25uZWN0aW9uLm9udHJhY2s9dGhpcy5vblRyYWNrKCk7dHJ5e3lpZWxkIHRoaXMuY29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihlKX1jYXRjaCh0KXtjb25zb2xlLmxvZyh0KX19KTt0aGlzLmFkZFRyYW5zY2VpdmVyc0lmTmVlZGVkPWU9Pnt2YXIgYztsZXQgdD10aGlzLmNvbm5lY3Rpb24uZ2V0VHJhbnNjZWl2ZXJzKCkuZmlsdGVyKG49Pm4uZGlyZWN0aW9uPT09XCJyZWN2b25seVwiKSxhPVtdLHI9bj0+e2xldCBsPWUuZ2V0KG4pO2w9bCE9PXZvaWQgMD9sOjA7bGV0IGY9dC5maWx0ZXIodT0+dS5yZWNlaXZlci50cmFjay5raW5kPT09bikubGVuZ3RoO3JldHVybiBBcnJheShsLWYpLmZpbGwobil9LGQ9cihcImF1ZGlvXCIpLG89cihcInZpZGVvXCIpO2E9YS5jb25jYXQoZCksYT1hLmNvbmNhdChvKTtmb3IobGV0IG4gb2YgYSkoYz10aGlzLmNvbm5lY3Rpb24pPT1udWxsfHxjLmFkZFRyYW5zY2VpdmVyKG4se2RpcmVjdGlvbjpcInJlY3Zvbmx5XCJ9KX07dGhpcy5nZXRUcmFja0lkVG9NZXRhZGF0YT0oKT0+e2xldCBlPXt9O3JldHVybiBBcnJheS5mcm9tKHRoaXMubG9jYWxQZWVyLnRyYWNrSWRUb01ldGFkYXRhLmVudHJpZXMoKSkuZm9yRWFjaCgoW3QsYV0pPT57ZVt0XT1hfSksZX07dGhpcy5vbk9mZmVyRGF0YT1lPT5tKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0aGlzLmNvbm5lY3Rpb24/eWllbGQgdGhpcy5jb25uZWN0aW9uLnJlc3RhcnRJY2UoKToodGhpcy5jb25uZWN0aW9uPW5ldyBSVENQZWVyQ29ubmVjdGlvbih0aGlzLnJ0Y0NvbmZpZyksdGhpcy5jb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlPXRoaXMub25Mb2NhbENhbmRpZGF0ZSgpLHRoaXMubG9jYWxUcmFja3NXaXRoU3RyZWFtcy5mb3JFYWNoKCh7dHJhY2s6dCxzdHJlYW06YX0pPT57dGhpcy5jb25uZWN0aW9uLmFkZFRyYWNrKHQsYSl9KSx0aGlzLmNvbm5lY3Rpb24uZ2V0VHJhbnNjZWl2ZXJzKCkuZm9yRWFjaCh0PT50LmRpcmVjdGlvbj1cInNlbmRvbmx5XCIpKSx0aGlzLmFkZFRyYW5zY2VpdmVyc0lmTmVlZGVkKGUpLHlpZWxkIHRoaXMuY3JlYXRlQW5kU2VuZE9mZmVyKCl9KTt0aGlzLm9uUmVtb3RlQ2FuZGlkYXRlPWU9Pnt0cnl7bGV0IHQ9bmV3IFJUQ0ljZUNhbmRpZGF0ZShlKTtpZighdGhpcy5jb25uZWN0aW9uKXRocm93IG5ldyBFcnJvcihcIlJlY2VpdmVkIG5ldyByZW1vdGUgY2FuZGlkYXRlIGJ1dCBSVENDb25uZWN0aW9uIGlzIHVuZGVmaW5lZFwiKTt0aGlzLmNvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKHQpfWNhdGNoKHQpe2NvbnNvbGUuZXJyb3IodCl9fTt0aGlzLm9uTG9jYWxDYW5kaWRhdGU9KCk9PmU9PntpZihlLmNhbmRpZGF0ZSl7bGV0IHQ9VChcImNhbmRpZGF0ZVwiLHtjYW5kaWRhdGU6ZS5jYW5kaWRhdGUuY2FuZGlkYXRlLHNkcE1MaW5lSW5kZXg6ZS5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleH0pO3RoaXMuc2VuZE1lZGlhRXZlbnQodCl9fTt0aGlzLm9uVHJhY2s9KCk9PmU9Pnt2YXIgbixsO2xldFt0XT1lLnN0cmVhbXMsYT1lLnRyYW5zY2VpdmVyLm1pZCxyPXRoaXMubWlkVG9UcmFja0lkLmdldChhKSxkPUFycmF5LmZyb20odGhpcy5pZFRvUGVlci52YWx1ZXMoKSkuZmlsdGVyKGY9PkFycmF5LmZyb20oZi50cmFja0lkVG9NZXRhZGF0YS5rZXlzKCkpLmluY2x1ZGVzKHIpKVswXSxvPWQudHJhY2tJZFRvTWV0YWRhdGEuZ2V0KHIpLGM9e3N0cmVhbTp0LHRyYWNrOmUudHJhY2sscGVlcjpkLHRyYWNrSWQ6cixtZXRhZGF0YTpvfTt0aGlzLnRyYWNrSWRUb1RyYWNrLnNldChyLGMpLChsPShuPXRoaXMuY2FsbGJhY2tzKS5vblRyYWNrUmVhZHkpPT1udWxsfHxsLmNhbGwobixjKX07dGhpcy5hZGRQZWVyPWU9PntlLnRyYWNrSWRUb01ldGFkYXRhPW5ldyBNYXAoT2JqZWN0LmVudHJpZXMoZS50cmFja0lkVG9NZXRhZGF0YSkpLHRoaXMuaWRUb1BlZXIuc2V0KGUuaWQsZSl9O3RoaXMuZXJhc2VQZWVyPWU9PntsZXQgdD1BcnJheS5mcm9tKGUudHJhY2tJZFRvTWV0YWRhdGEua2V5cygpKTt0LmZvckVhY2goYT0+dGhpcy50cmFja0lkVG9UcmFjay5kZWxldGUoYSkpLEFycmF5LmZyb20odGhpcy5taWRUb1RyYWNrSWQuZW50cmllcygpKS5mb3JFYWNoKChbYSxyXSk9Pnt0LmluY2x1ZGVzKHIpJiZ0aGlzLm1pZFRvVHJhY2tJZC5kZWxldGUoYSl9KSx0aGlzLmlkVG9QZWVyLmRlbGV0ZShlLmlkKX07dGhpcy5lcmFzZVRyYWNrPShlLHQpPT57dGhpcy50cmFja0lkVG9UcmFjay5kZWxldGUoZSk7bGV0IGE9QXJyYXkuZnJvbSh0aGlzLm1pZFRvVHJhY2tJZC5lbnRyaWVzKCkpLFtyLGRdPWEuZmluZCgoW28sY10pPT5jPT09ZSk7dGhpcy5taWRUb1RyYWNrSWQuZGVsZXRlKHIpLHRoaXMuaWRUb1BlZXIuZ2V0KHQpLnRyYWNrSWRUb01ldGFkYXRhLmRlbGV0ZShlKX07dGhpcy5nZXRQZWVySWQ9KCk9PnRoaXMubG9jYWxQZWVyLmlkO2xldHtyZWNlaXZlTWVkaWE6dD0hMCxjYWxsYmFja3M6YSxydGNDb25maWc6cn09ZTt0aGlzLnJlY2VpdmVNZWRpYT10LHRoaXMuY2FsbGJhY2tzPWEsdGhpcy5ydGNDb25maWc9cnx8dGhpcy5ydGNDb25maWd9YWRkVHJhY2soZSx0LGE9bmV3IE1hcCl7aWYodGhpcy5nZXRQZWVySWQoKT09PVwiXCIpdGhyb3dcIkNhbm5vdCBhZGQgdHJhY2tzIGJlZm9yZSBiZWluZyBhY2NlcHRlZCBieSB0aGUgc2VydmVyXCI7bGV0IHI9dGhpcy5nZXRUcmFja0lkKGIoKSk7dGhpcy5sb2NhbFRyYWNrc1dpdGhTdHJlYW1zLnB1c2goe3RyYWNrOmUsc3RyZWFtOnR9KSx0aGlzLmxvY2FsUGVlci50cmFja0lkVG9NZXRhZGF0YS5zZXQocixhKSx0aGlzLmxvY2FsVHJhY2tJZFRvVHJhY2suc2V0KHIse3RyYWNrOmUsc3RyZWFtOnQsdHJhY2tJZDpyLHBlZXI6dGhpcy5sb2NhbFBlZXIsbWV0YWRhdGE6YX0pLHRoaXMuY29ubmVjdGlvbiYmKHRoaXMuY29ubmVjdGlvbi5hZGRUcmFjayhlLHQpLHRoaXMuY29ubmVjdGlvbi5nZXRUcmFuc2NlaXZlcnMoKS5mb3JFYWNoKG89Pm8uZGlyZWN0aW9uPW8uZGlyZWN0aW9uPT09XCJzZW5kcmVjdlwiP1wic2VuZG9ubHlcIjpvLmRpcmVjdGlvbikpO2xldCBkPVQoXCJyZW5lZ290aWF0ZVRyYWNrc1wiLHt9KTtyZXR1cm4gdGhpcy5zZW5kTWVkaWFFdmVudChkKSxyfXJlcGxhY2VUcmFjayhlLHQsYSl7cmV0dXJuIG0odGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCByPXRoaXMubG9jYWxUcmFja0lkVG9UcmFjay5nZXQoZSksZD10aGlzLmZpbmRTZW5kZXIoci50cmFjay5pZCk7cmV0dXJuIGQ/ZC5yZXBsYWNlVHJhY2sodCkudGhlbigoKT0+e2xldCBvPWF8fHRoaXMubG9jYWxUcmFja0lkVG9UcmFjay5nZXQoZSkubWV0YWRhdGE7cmV0dXJuIHIudHJhY2s9dCx0aGlzLnVwZGF0ZVRyYWNrTWV0YWRhdGEoZSxvKSwhMH0pLmNhdGNoKCgpPT4hMSk6ITF9KX1yZW1vdmVUcmFjayhlKXtsZXQgdD10aGlzLmxvY2FsVHJhY2tJZFRvVHJhY2suZ2V0KGUpLGE9dGhpcy5maW5kU2VuZGVyKHQudHJhY2suaWQpO3RoaXMuY29ubmVjdGlvbi5yZW1vdmVUcmFjayhhKTtsZXQgcj1UKFwicmVuZWdvdGlhdGVUcmFja3NcIix7fSk7dGhpcy5zZW5kTWVkaWFFdmVudChyKX1maW5kU2VuZGVyKGUpe3JldHVybiB0aGlzLmNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZpbmQodD0+dC50cmFjayYmdC50cmFjay5pZD09PWUpfWdldFRyYWNrSWQoZSl7cmV0dXJuYCR7dGhpcy5nZXRQZWVySWQoKX06JHtlfSBgfWNyZWF0ZUFuZFNlbmRPZmZlcigpe3JldHVybiBtKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZighIXRoaXMuY29ubmVjdGlvbil0cnl7bGV0IGU9eWllbGQgdGhpcy5jb25uZWN0aW9uLmNyZWF0ZU9mZmVyKCk7eWllbGQgdGhpcy5jb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oZSk7bGV0IHQ9VChcInNkcE9mZmVyXCIse3NkcE9mZmVyOmUsdHJhY2tJZFRvVHJhY2tNZXRhZGF0YTp0aGlzLmdldFRyYWNrSWRUb01ldGFkYXRhKCksbWlkVG9UcmFja0lkOnRoaXMuZ2V0TWlkVG9UcmFja0lkKCl9KTt0aGlzLnNlbmRNZWRpYUV2ZW50KHQpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9fSl9fTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../deps/membrane_rtc_engine/priv/static/index.js\n");

/***/ }),

/***/ "../deps/phoenix/priv/static/phoenix.js":
/*!**********************************************!*\
  !*** ../deps/phoenix/priv/static/phoenix.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("!function(e,t){ true?module.exports=t():undefined}(this,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){\"use strict\";function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function o(e){return(o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}(e,t)||s(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function s(e,t){if(e){if(\"string\"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}n.r(t),n.d(t,\"Channel\",(function(){return A})),n.d(t,\"Serializer\",(function(){return M})),n.d(t,\"Socket\",(function(){return J})),n.d(t,\"LongPoll\",(function(){return H})),n.d(t,\"Ajax\",(function(){return D})),n.d(t,\"Presence\",(function(){return B}));var l=\"undefined\"!=typeof self?self:null,f=\"undefined\"!=typeof window?window:null,d=l||f||void 0,p=0,v=1,y=2,m=3,g=\"closed\",k=\"errored\",b=\"joined\",j=\"joining\",C=\"leaving\",R=\"phx_close\",S=\"phx_error\",T=\"phx_join\",w=\"phx_reply\",E=\"phx_leave\",x=[R,S,T,w,E],O=\"longpoll\",P=\"websocket\",L=function(e){if(\"function\"==typeof e)return e;return function(){return e}},_=function(){function e(t,n,i,o){c(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=o,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return h(e,[{key:\"resend\",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:\"send\",value:function(){this.hasReceived(\"timeout\")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:\"receive\",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:\"reset\",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:\"matchReceive\",value:function(e){var t=e.status,n=e.response;e.ref;this.recHooks.filter((function(e){return e.status===t})).forEach((function(e){return e.callback(n)}))}},{key:\"cancelRefEvent\",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:\"cancelTimeout\",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:\"startTimeout\",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,(function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)})),this.timeoutTimer=setTimeout((function(){e.trigger(\"timeout\",{})}),this.timeout)}},{key:\"hasReceived\",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:\"trigger\",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),A=function(){function e(t,n,i){var o=this;c(this,e),this.state=g,this.topic=t,this.params=L(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new _(this,T,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new I((function(){o.socket.isConnected()&&o.rejoin()}),this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError((function(){return o.rejoinTimer.reset()}))),this.stateChangeRefs.push(this.socket.onOpen((function(){o.rejoinTimer.reset(),o.isErrored()&&o.rejoin()}))),this.joinPush.receive(\"ok\",(function(){o.state=b,o.rejoinTimer.reset(),o.pushBuffer.forEach((function(e){return e.send()})),o.pushBuffer=[]})),this.joinPush.receive(\"error\",(function(){o.state=k,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.onClose((function(){o.rejoinTimer.reset(),o.socket.hasLogger()&&o.socket.log(\"channel\",\"close \".concat(o.topic,\" \").concat(o.joinRef())),o.state=g,o.socket.remove(o)})),this.onError((function(e){o.socket.hasLogger()&&o.socket.log(\"channel\",\"error \".concat(o.topic),e),o.isJoining()&&o.joinPush.reset(),o.state=k,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.joinPush.receive(\"timeout\",(function(){o.socket.hasLogger()&&o.socket.log(\"channel\",\"timeout \".concat(o.topic,\" (\").concat(o.joinRef(),\")\"),o.joinPush.timeout),new _(o,E,L({}),o.timeout).send(),o.state=k,o.joinPush.reset(),o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.on(w,(function(e,t){o.trigger(o.replyEventName(t),e)}))}return h(e,[{key:\"join\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error(\"tried to join multiple times. 'join' can only be called a single time per channel instance\");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:\"onClose\",value:function(e){this.on(R,e)}},{key:\"onError\",value:function(e){return this.on(S,(function(t){return e(t)}))}},{key:\"on\",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:\"off\",value:function(e,t){this.bindings=this.bindings.filter((function(n){return!(n.event===e&&(void 0===t||t===n.ref))}))}},{key:\"canPush\",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:\"push\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw new Error(\"tried to push '\".concat(e,\"' to '\").concat(this.topic,\"' before joining. Use channel.join() before pushing events\"));var i=new _(this,e,(function(){return t}),n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:\"leave\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=C;var n=function(){e.socket.hasLogger()&&e.socket.log(\"channel\",\"leave \".concat(e.topic)),e.trigger(R,\"leave\")},i=new _(this,E,L({}),t);return i.receive(\"ok\",(function(){return n()})).receive(\"timeout\",(function(){return n()})),i.send(),this.canPush()||i.trigger(\"ok\",{}),i}},{key:\"onMessage\",value:function(e,t,n){return t}},{key:\"isLifecycleEvent\",value:function(e){return x.indexOf(e)>=0}},{key:\"isMember\",value:function(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log(\"channel\",\"dropping outdated message\",{topic:e,event:t,payload:n,joinRef:i}),!1))}},{key:\"joinRef\",value:function(){return this.joinPush.ref}},{key:\"rejoin\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=j,this.joinPush.resend(e))}},{key:\"trigger\",value:function(e,t,n,i){var o=this.onMessage(e,t,n,i);if(t&&!o)throw new Error(\"channel onMessage callbacks must return the payload, modified or unmodified\");for(var r=this.bindings.filter((function(t){return t.event===e})),s=0;s<r.length;s++){r[s].callback(o,n,i||this.joinRef())}}},{key:\"replyEventName\",value:function(e){return\"chan_reply_\".concat(e)}},{key:\"isClosed\",value:function(){return this.state===g}},{key:\"isErrored\",value:function(){return this.state===k}},{key:\"isJoined\",value:function(){return this.state===b}},{key:\"isJoining\",value:function(){return this.state===j}},{key:\"isLeaving\",value:function(){return this.state===C}}]),e}(),M={encode:function(e,t){var n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))},decode:function(e,t){var n=r(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})}},J=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||1e4,this.transport=i.transport||d.WebSocket||H,this.defaultEncoder=M.encode,this.defaultDecoder=M.decode,this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||\"arraybuffer\",this.transport!==H?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),f&&f.addEventListener&&f.addEventListener(\"unload\",(function(e){n.conn&&(n.unloaded=!0,n.abnormalClose(\"unloaded\"))})),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=L(i.params||{}),this.endPoint=\"\".concat(t,\"/\").concat(P),this.vsn=i.vsn||\"2.0.0\",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new I((function(){n.teardown((function(){return n.connect()}))}),this.reconnectAfterMs)}return h(e,[{key:\"protocol\",value:function(){return location.protocol.match(/^https/)?\"wss\":\"ws\"}},{key:\"endPointURL\",value:function(){var e=D.appendParams(D.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return\"/\"!==e.charAt(0)?e:\"/\"===e.charAt(1)?\"\".concat(this.protocol(),\":\").concat(e):\"\".concat(this.protocol(),\"://\").concat(location.host).concat(e)}},{key:\"disconnect\",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:\"connect\",value:function(e){var t=this;e&&(console&&console.log(\"passing params to connect is deprecated. Instead pass :params to the Socket constructor\"),this.params=L(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:\"log\",value:function(e,t,n){this.logger(e,t,n)}},{key:\"hasLogger\",value:function(){return null!==this.logger}},{key:\"onOpen\",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}},{key:\"onClose\",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}},{key:\"onError\",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}},{key:\"onMessage\",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}},{key:\"onConnOpen\",value:function(){this.hasLogger()&&this.log(\"transport\",\"connected to \".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach((function(e){return(0,r(e,2)[1])()}))}},{key:\"resetHeartbeat\",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((function(){return e.sendHeartbeat()}),this.heartbeatIntervalMs))}},{key:\"teardown\",value:function(e,t,n){var i=this;if(!this.conn)return e&&e();this.waitForBufferDone((function(){i.conn&&(t?i.conn.close(t,n||\"\"):i.conn.close()),i.waitForSocketClosed((function(){i.conn&&(i.conn.onclose=function(){},i.conn=null),e&&e()}))}))}},{key:\"waitForBufferDone\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5===n||!this.conn||this.conn.bufferedAmount&&0===this.conn.bufferedAmount?e():setTimeout((function(){t.waitForBufferDone(e,n+1)}),150*n)}},{key:\"waitForSocketClosed\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.readyState!==m?setTimeout((function(){t.waitForSocketClosed(e,n+1)}),150*n):e()}},{key:\"onConnClose\",value:function(e){this.hasLogger()&&this.log(\"transport\",\"close\",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((function(t){return(0,r(t,2)[1])(e)}))}},{key:\"onConnError\",value:function(e){this.hasLogger()&&this.log(\"transport\",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach((function(t){return(0,r(t,2)[1])(e)}))}},{key:\"triggerChanError\",value:function(){this.channels.forEach((function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(S)}))}},{key:\"connectionState\",value:function(){switch(this.conn&&this.conn.readyState){case p:return\"connecting\";case v:return\"open\";case y:return\"closing\";default:return\"closed\"}}},{key:\"isConnected\",value:function(){return\"open\"===this.connectionState()}},{key:\"remove\",value:function(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter((function(t){return t.joinRef()!==e.joinRef()}))}},{key:\"off\",value:function(e){for(var t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter((function(t){var n=r(t,1)[0];return-1===e.indexOf(n)}))}},{key:\"channel\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new A(e,t,this);return this.channels.push(n),n}},{key:\"push\",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,o=e.payload,r=e.ref,s=e.join_ref;this.log(\"push\",\"\".concat(n,\" \").concat(i,\" (\").concat(s,\", \").concat(r,\")\"),o)}this.isConnected()?this.encode(e,(function(e){return t.conn.send(e)})):this.sendBuffer.push((function(){return t.encode(e,(function(e){return t.conn.send(e)}))}))}},{key:\"makeRef\",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:\"sendHeartbeat\",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log(\"transport\",\"heartbeat timeout. Attempting to re-establish connection\"),void this.abnormalClose(\"heartbeat timeout\");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:\"phoenix\",event:\"heartbeat\",payload:{},ref:this.pendingHeartbeatRef})}}},{key:\"abnormalClose\",value:function(e){this.closeWasClean=!1,this.conn.close(1e3,e)}},{key:\"flushSendBuffer\",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((function(e){return e()})),this.sendBuffer=[])}},{key:\"onConnMessage\",value:function(e){var t=this;this.decode(e.data,(function(e){var n=e.topic,i=e.event,o=e.payload,s=e.ref,a=e.join_ref;s&&s===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log(\"receive\",\"\".concat(o.status||\"\",\" \").concat(n,\" \").concat(i,\" \").concat(s&&\"(\"+s+\")\"||\"\"),o);for(var c=0;c<t.channels.length;c++){var u=t.channels[c];u.isMember(n,i,o,a)&&u.trigger(i,o,s,a)}for(var h=0;h<t.stateChangeCallbacks.message.length;h++){(0,r(t.stateChangeCallbacks.message[h],2)[1])(e)}}))}},{key:\"leaveOpenTopic\",value:function(e){var t=this.channels.find((function(t){return t.topic===e&&(t.isJoined()||t.isJoining())}));t&&(this.hasLogger()&&this.log(\"transport\",'leaving duplicate topic \"'.concat(e,'\"')),t.leave())}}]),e}(),H=function(){function e(t){c(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=p,this.poll()}return h(e,[{key:\"normalizeEndpoint\",value:function(e){return e.replace(\"ws://\",\"http://\").replace(\"wss://\",\"https://\").replace(new RegExp(\"(.*)/\"+P),\"$1/\"+O)}},{key:\"endpointURL\",value:function(){return D.appendParams(this.pollEndpoint,{token:this.token})}},{key:\"closeAndRetry\",value:function(){this.close(),this.readyState=p}},{key:\"ontimeout\",value:function(){this.onerror(\"timeout\"),this.closeAndRetry()}},{key:\"poll\",value:function(){var e=this;this.readyState!==v&&this.readyState!==p||D.request(\"GET\",this.endpointURL(),\"application/json\",null,this.timeout,this.ontimeout.bind(this),(function(t){if(t){var n=t.status,i=t.token,o=t.messages;e.token=i}else n=0;switch(n){case 200:o.forEach((function(t){return e.onmessage({data:t})})),e.poll();break;case 204:e.poll();break;case 410:e.readyState=v,e.onopen(),e.poll();break;case 403:e.onerror(),e.close();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw new Error(\"unhandled poll status \".concat(n))}}))}},{key:\"send\",value:function(e){var t=this;D.request(\"POST\",this.endpointURL(),\"application/json\",e,this.timeout,this.onerror.bind(this,\"timeout\"),(function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())}))}},{key:\"close\",value:function(e,t){this.readyState=m,this.onclose()}}]),e}(),D=function(){function e(){c(this,e)}return h(e,null,[{key:\"request\",value:function(e,t,n,i,o,r,s){if(d.XDomainRequest){var a=new XDomainRequest;this.xdomainRequest(a,e,t,i,o,r,s)}else{var c=new d.XMLHttpRequest;this.xhrRequest(c,e,t,n,i,o,r,s)}}},{key:\"xdomainRequest\",value:function(e,t,n,i,o,r,s){var a=this;e.timeout=o,e.open(t,n),e.onload=function(){var t=a.parseJSON(e.responseText);s&&s(t)},r&&(e.ontimeout=r),e.onprogress=function(){},e.send(i)}},{key:\"xhrRequest\",value:function(e,t,n,i,o,r,s,a){var c=this;e.open(t,n,!0),e.timeout=r,e.setRequestHeader(\"Content-Type\",i),e.onerror=function(){a&&a(null)},e.onreadystatechange=function(){if(e.readyState===c.states.complete&&a){var t=c.parseJSON(e.responseText);a(t)}},s&&(e.ontimeout=s),e.send(o)}},{key:\"parseJSON\",value:function(e){if(!e||\"\"===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log(\"failed to parse JSON response\",e),null}}},{key:\"serialize\",value:function(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)){var r=t?\"\".concat(t,\"[\").concat(i,\"]\"):i,s=e[i];\"object\"===o(s)?n.push(this.serialize(s,r)):n.push(encodeURIComponent(r)+\"=\"+encodeURIComponent(s))}return n.join(\"&\")}},{key:\"appendParams\",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\\?/)?\"&\":\"?\";return\"\".concat(e).concat(n).concat(this.serialize(t))}}]),e}();D.states={complete:4};var B=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,e);var o=i.events||{state:\"presence_state\",diff:\"presence_diff\"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(o.state,(function(t){var i=n.caller,o=i.onJoin,r=i.onLeave,s=i.onSync;n.joinRef=n.channel.joinRef(),n.state=e.syncState(n.state,t,o,r),n.pendingDiffs.forEach((function(t){n.state=e.syncDiff(n.state,t,o,r)})),n.pendingDiffs=[],s()})),this.channel.on(o.diff,(function(t){var i=n.caller,o=i.onJoin,r=i.onLeave,s=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,o,r),s())}))}return h(e,[{key:\"onJoin\",value:function(e){this.caller.onJoin=e}},{key:\"onLeave\",value:function(e){this.caller.onLeave=e}},{key:\"onSync\",value:function(e){this.caller.onSync=e}},{key:\"list\",value:function(t){return e.list(this.state,t)}},{key:\"inPendingSyncState\",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:\"syncState\",value:function(e,t,n,i){var o=this,r=this.clone(e),s={},a={};return this.map(r,(function(e,n){t[e]||(a[e]=n)})),this.map(t,(function(e,t){var n=r[e];if(n){var i=t.metas.map((function(e){return e.phx_ref})),c=n.metas.map((function(e){return e.phx_ref})),u=t.metas.filter((function(e){return c.indexOf(e.phx_ref)<0})),h=n.metas.filter((function(e){return i.indexOf(e.phx_ref)<0}));u.length>0&&(s[e]=t,s[e].metas=u),h.length>0&&(a[e]=o.clone(n),a[e].metas=h)}else s[e]=t})),this.syncDiff(r,{joins:s,leaves:a},n,i)}},{key:\"syncDiff\",value:function(e,t,n,o){var r=t.joins,s=t.leaves,a=this.clone(e);return n||(n=function(){}),o||(o=function(){}),this.map(r,(function(e,t){var o=a[e];if(a[e]=t,o){var r,s=a[e].metas.map((function(e){return e.phx_ref})),c=o.metas.filter((function(e){return s.indexOf(e.phx_ref)<0}));(r=a[e].metas).unshift.apply(r,i(c))}n(e,o,t)})),this.map(s,(function(e,t){var n=a[e];if(n){var i=t.metas.map((function(e){return e.phx_ref}));n.metas=n.metas.filter((function(e){return i.indexOf(e.phx_ref)<0})),o(e,n,t),0===n.metas.length&&delete a[e]}})),a}},{key:\"list\",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,(function(e,n){return t(e,n)}))}},{key:\"map\",value:function(e,t){return Object.getOwnPropertyNames(e).map((function(n){return t(n,e[n])}))}},{key:\"clone\",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}(),I=function(){function e(t,n){c(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return h(e,[{key:\"reset\",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:\"scheduleTimeout\",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}()}])}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vZGVwcy9waG9lbml4L3ByaXYvc3RhdGljL3Bob2VuaXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZGVwcy9waG9lbml4L3ByaXYvc3RhdGljL3Bob2VuaXguanM/MzFiYiJdLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSx0KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLlBob2VuaXg9dCgpOmUuUGhvZW5peD10KCl9KHRoaXMsKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIG4oaSl7aWYodFtpXSlyZXR1cm4gdFtpXS5leHBvcnRzO3ZhciBvPXRbaV09e2k6aSxsOiExLGV4cG9ydHM6e319O3JldHVybiBlW2ldLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLG4pLG8ubD0hMCxvLmV4cG9ydHN9cmV0dXJuIG4ubT1lLG4uYz10LG4uZD1mdW5jdGlvbihlLHQsaSl7bi5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2VudW1lcmFibGU6ITAsZ2V0Oml9KX0sbi5yPWZ1bmN0aW9uKGUpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LG4udD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9bihlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmXCJvYmplY3RcIj09dHlwZW9mIGUmJmUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgaT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihpKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxcImRlZmF1bHRcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTplfSksMiZ0JiZcInN0cmluZ1wiIT10eXBlb2YgZSlmb3IodmFyIG8gaW4gZSluLmQoaSxvLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwsbykpO3JldHVybiBpfSxuLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIG4uZCh0LFwiYVwiLHQpLHR9LG4ubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sbi5wPVwiXCIsbihuLnM9MCl9KFtmdW5jdGlvbihlLHQsbil7KGZ1bmN0aW9uKHQpe2UuZXhwb3J0cz10LlBob2VuaXg9bigyKX0pLmNhbGwodGhpcyxuKDEpKX0sZnVuY3Rpb24oZSx0KXt2YXIgbjtuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCk7dHJ5e249bnx8bmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKX1jYXRjaChlKXtcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiYobj13aW5kb3cpfWUuZXhwb3J0cz1ufSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaShlKXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gYShlKX0oZSl8fGZ1bmN0aW9uKGUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpcmV0dXJuIEFycmF5LmZyb20oZSl9KGUpfHxzKGUpfHxmdW5jdGlvbigpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfSgpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuKG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIHIoZSx0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZX0oZSl8fGZ1bmN0aW9uKGUsdCl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFN5bWJvbHx8IShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGUpKSlyZXR1cm47dmFyIG49W10saT0hMCxvPSExLHI9dm9pZCAwO3RyeXtmb3IodmFyIHMsYT1lW1N5bWJvbC5pdGVyYXRvcl0oKTshKGk9KHM9YS5uZXh0KCkpLmRvbmUpJiYobi5wdXNoKHMudmFsdWUpLCF0fHxuLmxlbmd0aCE9PXQpO2k9ITApO31jYXRjaChlKXtvPSEwLHI9ZX1maW5hbGx5e3RyeXtpfHxudWxsPT1hLnJldHVybnx8YS5yZXR1cm4oKX1maW5hbGx5e2lmKG8pdGhyb3cgcn19cmV0dXJuIG59KGUsdCl8fHMoZSx0KXx8ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpfSgpfWZ1bmN0aW9uIHMoZSx0KXtpZihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gYShlLHQpO3ZhciBuPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LC0xKTtyZXR1cm5cIk9iamVjdFwiPT09biYmZS5jb25zdHJ1Y3RvciYmKG49ZS5jb25zdHJ1Y3Rvci5uYW1lKSxcIk1hcFwiPT09bnx8XCJTZXRcIj09PW4/QXJyYXkuZnJvbShuKTpcIkFyZ3VtZW50c1wiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qobik/YShlLHQpOnZvaWQgMH19ZnVuY3Rpb24gYShlLHQpeyhudWxsPT10fHx0PmUubGVuZ3RoKSYmKHQ9ZS5sZW5ndGgpO2Zvcih2YXIgbj0wLGk9bmV3IEFycmF5KHQpO248dDtuKyspaVtuXT1lW25dO3JldHVybiBpfWZ1bmN0aW9uIGMoZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIHUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIGk9dFtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaS5rZXksaSl9fWZ1bmN0aW9uIGgoZSx0LG4pe3JldHVybiB0JiZ1KGUucHJvdG90eXBlLHQpLG4mJnUoZSxuKSxlfW4ucih0KSxuLmQodCxcIkNoYW5uZWxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gQX0pKSxuLmQodCxcIlNlcmlhbGl6ZXJcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTX0pKSxuLmQodCxcIlNvY2tldFwiLChmdW5jdGlvbigpe3JldHVybiBKfSkpLG4uZCh0LFwiTG9uZ1BvbGxcIiwoZnVuY3Rpb24oKXtyZXR1cm4gSH0pKSxuLmQodCxcIkFqYXhcIiwoZnVuY3Rpb24oKXtyZXR1cm4gRH0pKSxuLmQodCxcIlByZXNlbmNlXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEJ9KSk7dmFyIGw9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpudWxsLGY9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6bnVsbCxkPWx8fGZ8fHZvaWQgMCxwPTAsdj0xLHk9MixtPTMsZz1cImNsb3NlZFwiLGs9XCJlcnJvcmVkXCIsYj1cImpvaW5lZFwiLGo9XCJqb2luaW5nXCIsQz1cImxlYXZpbmdcIixSPVwicGh4X2Nsb3NlXCIsUz1cInBoeF9lcnJvclwiLFQ9XCJwaHhfam9pblwiLHc9XCJwaHhfcmVwbHlcIixFPVwicGh4X2xlYXZlXCIseD1bUixTLFQsdyxFXSxPPVwibG9uZ3BvbGxcIixQPVwid2Vic29ja2V0XCIsTD1mdW5jdGlvbihlKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlKXJldHVybiBlO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlfX0sXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLGksbyl7Yyh0aGlzLGUpLHRoaXMuY2hhbm5lbD10LHRoaXMuZXZlbnQ9bix0aGlzLnBheWxvYWQ9aXx8ZnVuY3Rpb24oKXtyZXR1cm57fX0sdGhpcy5yZWNlaXZlZFJlc3A9bnVsbCx0aGlzLnRpbWVvdXQ9byx0aGlzLnRpbWVvdXRUaW1lcj1udWxsLHRoaXMucmVjSG9va3M9W10sdGhpcy5zZW50PSExfXJldHVybiBoKGUsW3trZXk6XCJyZXNlbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnRpbWVvdXQ9ZSx0aGlzLnJlc2V0KCksdGhpcy5zZW5kKCl9fSx7a2V5Olwic2VuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5oYXNSZWNlaXZlZChcInRpbWVvdXRcIil8fCh0aGlzLnN0YXJ0VGltZW91dCgpLHRoaXMuc2VudD0hMCx0aGlzLmNoYW5uZWwuc29ja2V0LnB1c2goe3RvcGljOnRoaXMuY2hhbm5lbC50b3BpYyxldmVudDp0aGlzLmV2ZW50LHBheWxvYWQ6dGhpcy5wYXlsb2FkKCkscmVmOnRoaXMucmVmLGpvaW5fcmVmOnRoaXMuY2hhbm5lbC5qb2luUmVmKCl9KSl9fSx7a2V5OlwicmVjZWl2ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuaGFzUmVjZWl2ZWQoZSkmJnQodGhpcy5yZWNlaXZlZFJlc3AucmVzcG9uc2UpLHRoaXMucmVjSG9va3MucHVzaCh7c3RhdHVzOmUsY2FsbGJhY2s6dH0pLHRoaXN9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2FuY2VsUmVmRXZlbnQoKSx0aGlzLnJlZj1udWxsLHRoaXMucmVmRXZlbnQ9bnVsbCx0aGlzLnJlY2VpdmVkUmVzcD1udWxsLHRoaXMuc2VudD0hMX19LHtrZXk6XCJtYXRjaFJlY2VpdmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnN0YXR1cyxuPWUucmVzcG9uc2U7ZS5yZWY7dGhpcy5yZWNIb29rcy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXR1cz09PXR9KSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2FsbGJhY2sobil9KSl9fSx7a2V5OlwiY2FuY2VsUmVmRXZlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVmRXZlbnQmJnRoaXMuY2hhbm5lbC5vZmYodGhpcy5yZWZFdmVudCl9fSx7a2V5OlwiY2FuY2VsVGltZW91dFwiLHZhbHVlOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFRpbWVyKSx0aGlzLnRpbWVvdXRUaW1lcj1udWxsfX0se2tleTpcInN0YXJ0VGltZW91dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnRpbWVvdXRUaW1lciYmdGhpcy5jYW5jZWxUaW1lb3V0KCksdGhpcy5yZWY9dGhpcy5jaGFubmVsLnNvY2tldC5tYWtlUmVmKCksdGhpcy5yZWZFdmVudD10aGlzLmNoYW5uZWwucmVwbHlFdmVudE5hbWUodGhpcy5yZWYpLHRoaXMuY2hhbm5lbC5vbih0aGlzLnJlZkV2ZW50LChmdW5jdGlvbih0KXtlLmNhbmNlbFJlZkV2ZW50KCksZS5jYW5jZWxUaW1lb3V0KCksZS5yZWNlaXZlZFJlc3A9dCxlLm1hdGNoUmVjZWl2ZSh0KX0pKSx0aGlzLnRpbWVvdXRUaW1lcj1zZXRUaW1lb3V0KChmdW5jdGlvbigpe2UudHJpZ2dlcihcInRpbWVvdXRcIix7fSl9KSx0aGlzLnRpbWVvdXQpfX0se2tleTpcImhhc1JlY2VpdmVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVjZWl2ZWRSZXNwJiZ0aGlzLnJlY2VpdmVkUmVzcC5zdGF0dXM9PT1lfX0se2tleTpcInRyaWdnZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuY2hhbm5lbC50cmlnZ2VyKHRoaXMucmVmRXZlbnQse3N0YXR1czplLHJlc3BvbnNlOnR9KX19XSksZX0oKSxBPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4saSl7dmFyIG89dGhpcztjKHRoaXMsZSksdGhpcy5zdGF0ZT1nLHRoaXMudG9waWM9dCx0aGlzLnBhcmFtcz1MKG58fHt9KSx0aGlzLnNvY2tldD1pLHRoaXMuYmluZGluZ3M9W10sdGhpcy5iaW5kaW5nUmVmPTAsdGhpcy50aW1lb3V0PXRoaXMuc29ja2V0LnRpbWVvdXQsdGhpcy5qb2luZWRPbmNlPSExLHRoaXMuam9pblB1c2g9bmV3IF8odGhpcyxULHRoaXMucGFyYW1zLHRoaXMudGltZW91dCksdGhpcy5wdXNoQnVmZmVyPVtdLHRoaXMuc3RhdGVDaGFuZ2VSZWZzPVtdLHRoaXMucmVqb2luVGltZXI9bmV3IEkoKGZ1bmN0aW9uKCl7by5zb2NrZXQuaXNDb25uZWN0ZWQoKSYmby5yZWpvaW4oKX0pLHRoaXMuc29ja2V0LnJlam9pbkFmdGVyTXMpLHRoaXMuc3RhdGVDaGFuZ2VSZWZzLnB1c2godGhpcy5zb2NrZXQub25FcnJvcigoZnVuY3Rpb24oKXtyZXR1cm4gby5yZWpvaW5UaW1lci5yZXNldCgpfSkpKSx0aGlzLnN0YXRlQ2hhbmdlUmVmcy5wdXNoKHRoaXMuc29ja2V0Lm9uT3BlbigoZnVuY3Rpb24oKXtvLnJlam9pblRpbWVyLnJlc2V0KCksby5pc0Vycm9yZWQoKSYmby5yZWpvaW4oKX0pKSksdGhpcy5qb2luUHVzaC5yZWNlaXZlKFwib2tcIiwoZnVuY3Rpb24oKXtvLnN0YXRlPWIsby5yZWpvaW5UaW1lci5yZXNldCgpLG8ucHVzaEJ1ZmZlci5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gZS5zZW5kKCl9KSksby5wdXNoQnVmZmVyPVtdfSkpLHRoaXMuam9pblB1c2gucmVjZWl2ZShcImVycm9yXCIsKGZ1bmN0aW9uKCl7by5zdGF0ZT1rLG8uc29ja2V0LmlzQ29ubmVjdGVkKCkmJm8ucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCl9KSksdGhpcy5vbkNsb3NlKChmdW5jdGlvbigpe28ucmVqb2luVGltZXIucmVzZXQoKSxvLnNvY2tldC5oYXNMb2dnZXIoKSYmby5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLFwiY2xvc2UgXCIuY29uY2F0KG8udG9waWMsXCIgXCIpLmNvbmNhdChvLmpvaW5SZWYoKSkpLG8uc3RhdGU9ZyxvLnNvY2tldC5yZW1vdmUobyl9KSksdGhpcy5vbkVycm9yKChmdW5jdGlvbihlKXtvLnNvY2tldC5oYXNMb2dnZXIoKSYmby5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLFwiZXJyb3IgXCIuY29uY2F0KG8udG9waWMpLGUpLG8uaXNKb2luaW5nKCkmJm8uam9pblB1c2gucmVzZXQoKSxvLnN0YXRlPWssby5zb2NrZXQuaXNDb25uZWN0ZWQoKSYmby5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKX0pKSx0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJ0aW1lb3V0XCIsKGZ1bmN0aW9uKCl7by5zb2NrZXQuaGFzTG9nZ2VyKCkmJm8uc29ja2V0LmxvZyhcImNoYW5uZWxcIixcInRpbWVvdXQgXCIuY29uY2F0KG8udG9waWMsXCIgKFwiKS5jb25jYXQoby5qb2luUmVmKCksXCIpXCIpLG8uam9pblB1c2gudGltZW91dCksbmV3IF8obyxFLEwoe30pLG8udGltZW91dCkuc2VuZCgpLG8uc3RhdGU9ayxvLmpvaW5QdXNoLnJlc2V0KCksby5zb2NrZXQuaXNDb25uZWN0ZWQoKSYmby5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKX0pKSx0aGlzLm9uKHcsKGZ1bmN0aW9uKGUsdCl7by50cmlnZ2VyKG8ucmVwbHlFdmVudE5hbWUodCksZSl9KSl9cmV0dXJuIGgoZSxbe2tleTpcImpvaW5cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLnRpbWVvdXQ7aWYodGhpcy5qb2luZWRPbmNlKXRocm93IG5ldyBFcnJvcihcInRyaWVkIHRvIGpvaW4gbXVsdGlwbGUgdGltZXMuICdqb2luJyBjYW4gb25seSBiZSBjYWxsZWQgYSBzaW5nbGUgdGltZSBwZXIgY2hhbm5lbCBpbnN0YW5jZVwiKTtyZXR1cm4gdGhpcy50aW1lb3V0PWUsdGhpcy5qb2luZWRPbmNlPSEwLHRoaXMucmVqb2luKCksdGhpcy5qb2luUHVzaH19LHtrZXk6XCJvbkNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5vbihSLGUpfX0se2tleTpcIm9uRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbihTLChmdW5jdGlvbih0KXtyZXR1cm4gZSh0KX0pKX19LHtrZXk6XCJvblwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5iaW5kaW5nUmVmKys7cmV0dXJuIHRoaXMuYmluZGluZ3MucHVzaCh7ZXZlbnQ6ZSxyZWY6bixjYWxsYmFjazp0fSksbn19LHtrZXk6XCJvZmZcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuYmluZGluZ3M9dGhpcy5iaW5kaW5ncy5maWx0ZXIoKGZ1bmN0aW9uKG4pe3JldHVybiEobi5ldmVudD09PWUmJih2b2lkIDA9PT10fHx0PT09bi5yZWYpKX0pKX19LHtrZXk6XCJjYW5QdXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSYmdGhpcy5pc0pvaW5lZCgpfX0se2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp0aGlzLnRpbWVvdXQ7aWYoIXRoaXMuam9pbmVkT25jZSl0aHJvdyBuZXcgRXJyb3IoXCJ0cmllZCB0byBwdXNoICdcIi5jb25jYXQoZSxcIicgdG8gJ1wiKS5jb25jYXQodGhpcy50b3BpYyxcIicgYmVmb3JlIGpvaW5pbmcuIFVzZSBjaGFubmVsLmpvaW4oKSBiZWZvcmUgcHVzaGluZyBldmVudHNcIikpO3ZhciBpPW5ldyBfKHRoaXMsZSwoZnVuY3Rpb24oKXtyZXR1cm4gdH0pLG4pO3JldHVybiB0aGlzLmNhblB1c2goKT9pLnNlbmQoKTooaS5zdGFydFRpbWVvdXQoKSx0aGlzLnB1c2hCdWZmZXIucHVzaChpKSksaX19LHtrZXk6XCJsZWF2ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLnRpbWVvdXQ7dGhpcy5yZWpvaW5UaW1lci5yZXNldCgpLHRoaXMuam9pblB1c2guY2FuY2VsVGltZW91dCgpLHRoaXMuc3RhdGU9Qzt2YXIgbj1mdW5jdGlvbigpe2Uuc29ja2V0Lmhhc0xvZ2dlcigpJiZlLnNvY2tldC5sb2coXCJjaGFubmVsXCIsXCJsZWF2ZSBcIi5jb25jYXQoZS50b3BpYykpLGUudHJpZ2dlcihSLFwibGVhdmVcIil9LGk9bmV3IF8odGhpcyxFLEwoe30pLHQpO3JldHVybiBpLnJlY2VpdmUoXCJva1wiLChmdW5jdGlvbigpe3JldHVybiBuKCl9KSkucmVjZWl2ZShcInRpbWVvdXRcIiwoZnVuY3Rpb24oKXtyZXR1cm4gbigpfSkpLGkuc2VuZCgpLHRoaXMuY2FuUHVzaCgpfHxpLnRyaWdnZXIoXCJva1wiLHt9KSxpfX0se2tleTpcIm9uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdH19LHtrZXk6XCJpc0xpZmVjeWNsZUV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHguaW5kZXhPZihlKT49MH19LHtrZXk6XCJpc01lbWJlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLnRvcGljPT09ZSYmKCFpfHxpPT09dGhpcy5qb2luUmVmKCl8fCF0aGlzLmlzTGlmZWN5Y2xlRXZlbnQodCl8fCh0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSYmdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLFwiZHJvcHBpbmcgb3V0ZGF0ZWQgbWVzc2FnZVwiLHt0b3BpYzplLGV2ZW50OnQscGF5bG9hZDpuLGpvaW5SZWY6aX0pLCExKSl9fSx7a2V5Olwiam9pblJlZlwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuam9pblB1c2gucmVmfX0se2tleTpcInJlam9pblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMudGltZW91dDt0aGlzLmlzTGVhdmluZygpfHwodGhpcy5zb2NrZXQubGVhdmVPcGVuVG9waWModGhpcy50b3BpYyksdGhpcy5zdGF0ZT1qLHRoaXMuam9pblB1c2gucmVzZW5kKGUpKX19LHtrZXk6XCJ0cmlnZ2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIG89dGhpcy5vbk1lc3NhZ2UoZSx0LG4saSk7aWYodCYmIW8pdGhyb3cgbmV3IEVycm9yKFwiY2hhbm5lbCBvbk1lc3NhZ2UgY2FsbGJhY2tzIG11c3QgcmV0dXJuIHRoZSBwYXlsb2FkLCBtb2RpZmllZCBvciB1bm1vZGlmaWVkXCIpO2Zvcih2YXIgcj10aGlzLmJpbmRpbmdzLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQuZXZlbnQ9PT1lfSkpLHM9MDtzPHIubGVuZ3RoO3MrKyl7cltzXS5jYWxsYmFjayhvLG4saXx8dGhpcy5qb2luUmVmKCkpfX19LHtrZXk6XCJyZXBseUV2ZW50TmFtZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVyblwiY2hhbl9yZXBseV9cIi5jb25jYXQoZSl9fSx7a2V5OlwiaXNDbG9zZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlPT09Z319LHtrZXk6XCJpc0Vycm9yZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlPT09a319LHtrZXk6XCJpc0pvaW5lZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGU9PT1ifX0se2tleTpcImlzSm9pbmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGU9PT1qfX0se2tleTpcImlzTGVhdmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGU9PT1DfX1dKSxlfSgpLE09e2VuY29kZTpmdW5jdGlvbihlLHQpe3ZhciBuPVtlLmpvaW5fcmVmLGUucmVmLGUudG9waWMsZS5ldmVudCxlLnBheWxvYWRdO3JldHVybiB0KEpTT04uc3RyaW5naWZ5KG4pKX0sZGVjb2RlOmZ1bmN0aW9uKGUsdCl7dmFyIG49cihKU09OLnBhcnNlKGUpLDUpO3JldHVybiB0KHtqb2luX3JlZjpuWzBdLHJlZjpuWzFdLHRvcGljOm5bMl0sZXZlbnQ6blszXSxwYXlsb2FkOm5bNF19KX19LEo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3ZhciBuPXRoaXMsaT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307Yyh0aGlzLGUpLHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3M9e29wZW46W10sY2xvc2U6W10sZXJyb3I6W10sbWVzc2FnZTpbXX0sdGhpcy5jaGFubmVscz1bXSx0aGlzLnNlbmRCdWZmZXI9W10sdGhpcy5yZWY9MCx0aGlzLnRpbWVvdXQ9aS50aW1lb3V0fHwxZTQsdGhpcy50cmFuc3BvcnQ9aS50cmFuc3BvcnR8fGQuV2ViU29ja2V0fHxILHRoaXMuZGVmYXVsdEVuY29kZXI9TS5lbmNvZGUsdGhpcy5kZWZhdWx0RGVjb2Rlcj1NLmRlY29kZSx0aGlzLmNsb3NlV2FzQ2xlYW49ITEsdGhpcy51bmxvYWRlZD0hMSx0aGlzLmJpbmFyeVR5cGU9aS5iaW5hcnlUeXBlfHxcImFycmF5YnVmZmVyXCIsdGhpcy50cmFuc3BvcnQhPT1IPyh0aGlzLmVuY29kZT1pLmVuY29kZXx8dGhpcy5kZWZhdWx0RW5jb2Rlcix0aGlzLmRlY29kZT1pLmRlY29kZXx8dGhpcy5kZWZhdWx0RGVjb2Rlcik6KHRoaXMuZW5jb2RlPXRoaXMuZGVmYXVsdEVuY29kZXIsdGhpcy5kZWNvZGU9dGhpcy5kZWZhdWx0RGVjb2RlciksZiYmZi5hZGRFdmVudExpc3RlbmVyJiZmLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIiwoZnVuY3Rpb24oZSl7bi5jb25uJiYobi51bmxvYWRlZD0hMCxuLmFibm9ybWFsQ2xvc2UoXCJ1bmxvYWRlZFwiKSl9KSksdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zPWkuaGVhcnRiZWF0SW50ZXJ2YWxNc3x8M2U0LHRoaXMucmVqb2luQWZ0ZXJNcz1mdW5jdGlvbihlKXtyZXR1cm4gaS5yZWpvaW5BZnRlck1zP2kucmVqb2luQWZ0ZXJNcyhlKTpbMWUzLDJlMyw1ZTNdW2UtMV18fDFlNH0sdGhpcy5yZWNvbm5lY3RBZnRlck1zPWZ1bmN0aW9uKGUpe3JldHVybiBuLnVubG9hZGVkPzEwMDppLnJlY29ubmVjdEFmdGVyTXM/aS5yZWNvbm5lY3RBZnRlck1zKGUpOlsxMCw1MCwxMDAsMTUwLDIwMCwyNTAsNTAwLDFlMywyZTNdW2UtMV18fDVlM30sdGhpcy5sb2dnZXI9aS5sb2dnZXJ8fG51bGwsdGhpcy5sb25ncG9sbGVyVGltZW91dD1pLmxvbmdwb2xsZXJUaW1lb3V0fHwyZTQsdGhpcy5wYXJhbXM9TChpLnBhcmFtc3x8e30pLHRoaXMuZW5kUG9pbnQ9XCJcIi5jb25jYXQodCxcIi9cIikuY29uY2F0KFApLHRoaXMudnNuPWkudnNufHxcIjIuMC4wXCIsdGhpcy5oZWFydGJlYXRUaW1lcj1udWxsLHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZj1udWxsLHRoaXMucmVjb25uZWN0VGltZXI9bmV3IEkoKGZ1bmN0aW9uKCl7bi50ZWFyZG93bigoZnVuY3Rpb24oKXtyZXR1cm4gbi5jb25uZWN0KCl9KSl9KSx0aGlzLnJlY29ubmVjdEFmdGVyTXMpfXJldHVybiBoKGUsW3trZXk6XCJwcm90b2NvbFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGxvY2F0aW9uLnByb3RvY29sLm1hdGNoKC9eaHR0cHMvKT9cIndzc1wiOlwid3NcIn19LHtrZXk6XCJlbmRQb2ludFVSTFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9RC5hcHBlbmRQYXJhbXMoRC5hcHBlbmRQYXJhbXModGhpcy5lbmRQb2ludCx0aGlzLnBhcmFtcygpKSx7dnNuOnRoaXMudnNufSk7cmV0dXJuXCIvXCIhPT1lLmNoYXJBdCgwKT9lOlwiL1wiPT09ZS5jaGFyQXQoMSk/XCJcIi5jb25jYXQodGhpcy5wcm90b2NvbCgpLFwiOlwiKS5jb25jYXQoZSk6XCJcIi5jb25jYXQodGhpcy5wcm90b2NvbCgpLFwiOi8vXCIpLmNvbmNhdChsb2NhdGlvbi5ob3N0KS5jb25jYXQoZSl9fSx7a2V5OlwiZGlzY29ubmVjdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLmNsb3NlV2FzQ2xlYW49ITAsdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpLHRoaXMudGVhcmRvd24oZSx0LG4pfX0se2tleTpcImNvbm5lY3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UmJihjb25zb2xlJiZjb25zb2xlLmxvZyhcInBhc3NpbmcgcGFyYW1zIHRvIGNvbm5lY3QgaXMgZGVwcmVjYXRlZC4gSW5zdGVhZCBwYXNzIDpwYXJhbXMgdG8gdGhlIFNvY2tldCBjb25zdHJ1Y3RvclwiKSx0aGlzLnBhcmFtcz1MKGUpKSx0aGlzLmNvbm58fCh0aGlzLmNsb3NlV2FzQ2xlYW49ITEsdGhpcy5jb25uPW5ldyB0aGlzLnRyYW5zcG9ydCh0aGlzLmVuZFBvaW50VVJMKCkpLHRoaXMuY29ubi5iaW5hcnlUeXBlPXRoaXMuYmluYXJ5VHlwZSx0aGlzLmNvbm4udGltZW91dD10aGlzLmxvbmdwb2xsZXJUaW1lb3V0LHRoaXMuY29ubi5vbm9wZW49ZnVuY3Rpb24oKXtyZXR1cm4gdC5vbkNvbm5PcGVuKCl9LHRoaXMuY29ubi5vbmVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiB0Lm9uQ29ubkVycm9yKGUpfSx0aGlzLmNvbm4ub25tZXNzYWdlPWZ1bmN0aW9uKGUpe3JldHVybiB0Lm9uQ29ubk1lc3NhZ2UoZSl9LHRoaXMuY29ubi5vbmNsb3NlPWZ1bmN0aW9uKGUpe3JldHVybiB0Lm9uQ29ubkNsb3NlKGUpfSl9fSx7a2V5OlwibG9nXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3RoaXMubG9nZ2VyKGUsdCxuKX19LHtrZXk6XCJoYXNMb2dnZXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5sb2dnZXJ9fSx7a2V5Olwib25PcGVuXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5tYWtlUmVmKCk7cmV0dXJuIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Mub3Blbi5wdXNoKFt0LGVdKSx0fX0se2tleTpcIm9uQ2xvc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm1ha2VSZWYoKTtyZXR1cm4gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5jbG9zZS5wdXNoKFt0LGVdKSx0fX0se2tleTpcIm9uRXJyb3JcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm1ha2VSZWYoKTtyZXR1cm4gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5wdXNoKFt0LGVdKSx0fX0se2tleTpcIm9uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubWFrZVJlZigpO3JldHVybiB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2UucHVzaChbdCxlXSksdH19LHtrZXk6XCJvbkNvbm5PcGVuXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmhhc0xvZ2dlcigpJiZ0aGlzLmxvZyhcInRyYW5zcG9ydFwiLFwiY29ubmVjdGVkIHRvIFwiLmNvbmNhdCh0aGlzLmVuZFBvaW50VVJMKCkpKSx0aGlzLnVubG9hZGVkPSExLHRoaXMuY2xvc2VXYXNDbGVhbj0hMSx0aGlzLmZsdXNoU2VuZEJ1ZmZlcigpLHRoaXMucmVjb25uZWN0VGltZXIucmVzZXQoKSx0aGlzLnJlc2V0SGVhcnRiZWF0KCksdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5vcGVuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybigwLHIoZSwyKVsxXSkoKX0pKX19LHtrZXk6XCJyZXNldEhlYXJ0YmVhdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmNvbm4mJnRoaXMuY29ubi5za2lwSGVhcnRiZWF0fHwodGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmPW51bGwsY2xlYXJJbnRlcnZhbCh0aGlzLmhlYXJ0YmVhdFRpbWVyKSx0aGlzLmhlYXJ0YmVhdFRpbWVyPXNldEludGVydmFsKChmdW5jdGlvbigpe3JldHVybiBlLnNlbmRIZWFydGJlYXQoKX0pLHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcykpfX0se2tleTpcInRlYXJkb3duXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXM7aWYoIXRoaXMuY29ubilyZXR1cm4gZSYmZSgpO3RoaXMud2FpdEZvckJ1ZmZlckRvbmUoKGZ1bmN0aW9uKCl7aS5jb25uJiYodD9pLmNvbm4uY2xvc2UodCxufHxcIlwiKTppLmNvbm4uY2xvc2UoKSksaS53YWl0Rm9yU29ja2V0Q2xvc2VkKChmdW5jdGlvbigpe2kuY29ubiYmKGkuY29ubi5vbmNsb3NlPWZ1bmN0aW9uKCl7fSxpLmNvbm49bnVsbCksZSYmZSgpfSkpfSkpfX0se2tleTpcIndhaXRGb3JCdWZmZXJEb25lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxOzU9PT1ufHwhdGhpcy5jb25ufHx0aGlzLmNvbm4uYnVmZmVyZWRBbW91bnQmJjA9PT10aGlzLmNvbm4uYnVmZmVyZWRBbW91bnQ/ZSgpOnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC53YWl0Rm9yQnVmZmVyRG9uZShlLG4rMSl9KSwxNTAqbil9fSx7a2V5Olwid2FpdEZvclNvY2tldENsb3NlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MTs1IT09biYmdGhpcy5jb25uJiZ0aGlzLmNvbm4ucmVhZHlTdGF0ZSE9PW0/c2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LndhaXRGb3JTb2NrZXRDbG9zZWQoZSxuKzEpfSksMTUwKm4pOmUoKX19LHtrZXk6XCJvbkNvbm5DbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuaGFzTG9nZ2VyKCkmJnRoaXMubG9nKFwidHJhbnNwb3J0XCIsXCJjbG9zZVwiLGUpLHRoaXMudHJpZ2dlckNoYW5FcnJvcigpLGNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRUaW1lciksdGhpcy5jbG9zZVdhc0NsZWFufHx0aGlzLnJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpLHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuKDAscih0LDIpWzFdKShlKX0pKX19LHtrZXk6XCJvbkNvbm5FcnJvclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuaGFzTG9nZ2VyKCkmJnRoaXMubG9nKFwidHJhbnNwb3J0XCIsZSksdGhpcy50cmlnZ2VyQ2hhbkVycm9yKCksdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4oMCxyKHQsMilbMV0pKGUpfSkpfX0se2tleTpcInRyaWdnZXJDaGFuRXJyb3JcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2hhbm5lbHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5pc0Vycm9yZWQoKXx8ZS5pc0xlYXZpbmcoKXx8ZS5pc0Nsb3NlZCgpfHxlLnRyaWdnZXIoUyl9KSl9fSx7a2V5OlwiY29ubmVjdGlvblN0YXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5jb25uJiZ0aGlzLmNvbm4ucmVhZHlTdGF0ZSl7Y2FzZSBwOnJldHVyblwiY29ubmVjdGluZ1wiO2Nhc2UgdjpyZXR1cm5cIm9wZW5cIjtjYXNlIHk6cmV0dXJuXCJjbG9zaW5nXCI7ZGVmYXVsdDpyZXR1cm5cImNsb3NlZFwifX19LHtrZXk6XCJpc0Nvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJvcGVuXCI9PT10aGlzLmNvbm5lY3Rpb25TdGF0ZSgpfX0se2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMub2ZmKGUuc3RhdGVDaGFuZ2VSZWZzKSx0aGlzLmNoYW5uZWxzPXRoaXMuY2hhbm5lbHMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5qb2luUmVmKCkhPT1lLmpvaW5SZWYoKX0pKX19LHtrZXk6XCJvZmZcIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyl0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW3RdPXRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3NbdF0uZmlsdGVyKChmdW5jdGlvbih0KXt2YXIgbj1yKHQsMSlbMF07cmV0dXJuLTE9PT1lLmluZGV4T2Yobil9KSl9fSx7a2V5OlwiY2hhbm5lbFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPW5ldyBBKGUsdCx0aGlzKTtyZXR1cm4gdGhpcy5jaGFubmVscy5wdXNoKG4pLG59fSx7a2V5OlwicHVzaFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5oYXNMb2dnZXIoKSl7dmFyIG49ZS50b3BpYyxpPWUuZXZlbnQsbz1lLnBheWxvYWQscj1lLnJlZixzPWUuam9pbl9yZWY7dGhpcy5sb2coXCJwdXNoXCIsXCJcIi5jb25jYXQobixcIiBcIikuY29uY2F0KGksXCIgKFwiKS5jb25jYXQocyxcIiwgXCIpLmNvbmNhdChyLFwiKVwiKSxvKX10aGlzLmlzQ29ubmVjdGVkKCk/dGhpcy5lbmNvZGUoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuY29ubi5zZW5kKGUpfSkpOnRoaXMuc2VuZEJ1ZmZlci5wdXNoKChmdW5jdGlvbigpe3JldHVybiB0LmVuY29kZShlLChmdW5jdGlvbihlKXtyZXR1cm4gdC5jb25uLnNlbmQoZSl9KSl9KSl9fSx7a2V5OlwibWFrZVJlZlwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZWYrMTtyZXR1cm4gZT09PXRoaXMucmVmP3RoaXMucmVmPTA6dGhpcy5yZWY9ZSx0aGlzLnJlZi50b1N0cmluZygpfX0se2tleTpcInNlbmRIZWFydGJlYXRcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuaXNDb25uZWN0ZWQoKSl7aWYodGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmKXJldHVybiB0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWY9bnVsbCx0aGlzLmhhc0xvZ2dlcigpJiZ0aGlzLmxvZyhcInRyYW5zcG9ydFwiLFwiaGVhcnRiZWF0IHRpbWVvdXQuIEF0dGVtcHRpbmcgdG8gcmUtZXN0YWJsaXNoIGNvbm5lY3Rpb25cIiksdm9pZCB0aGlzLmFibm9ybWFsQ2xvc2UoXCJoZWFydGJlYXQgdGltZW91dFwiKTt0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWY9dGhpcy5tYWtlUmVmKCksdGhpcy5wdXNoKHt0b3BpYzpcInBob2VuaXhcIixldmVudDpcImhlYXJ0YmVhdFwiLHBheWxvYWQ6e30scmVmOnRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZn0pfX19LHtrZXk6XCJhYm5vcm1hbENsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jbG9zZVdhc0NsZWFuPSExLHRoaXMuY29ubi5jbG9zZSgxZTMsZSl9fSx7a2V5OlwiZmx1c2hTZW5kQnVmZmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmlzQ29ubmVjdGVkKCkmJnRoaXMuc2VuZEJ1ZmZlci5sZW5ndGg+MCYmKHRoaXMuc2VuZEJ1ZmZlci5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gZSgpfSkpLHRoaXMuc2VuZEJ1ZmZlcj1bXSl9fSx7a2V5Olwib25Db25uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5kZWNvZGUoZS5kYXRhLChmdW5jdGlvbihlKXt2YXIgbj1lLnRvcGljLGk9ZS5ldmVudCxvPWUucGF5bG9hZCxzPWUucmVmLGE9ZS5qb2luX3JlZjtzJiZzPT09dC5wZW5kaW5nSGVhcnRiZWF0UmVmJiYodC5wZW5kaW5nSGVhcnRiZWF0UmVmPW51bGwpLHQuaGFzTG9nZ2VyKCkmJnQubG9nKFwicmVjZWl2ZVwiLFwiXCIuY29uY2F0KG8uc3RhdHVzfHxcIlwiLFwiIFwiKS5jb25jYXQobixcIiBcIikuY29uY2F0KGksXCIgXCIpLmNvbmNhdChzJiZcIihcIitzK1wiKVwifHxcIlwiKSxvKTtmb3IodmFyIGM9MDtjPHQuY2hhbm5lbHMubGVuZ3RoO2MrKyl7dmFyIHU9dC5jaGFubmVsc1tjXTt1LmlzTWVtYmVyKG4saSxvLGEpJiZ1LnRyaWdnZXIoaSxvLHMsYSl9Zm9yKHZhciBoPTA7aDx0LnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2UubGVuZ3RoO2grKyl7KDAscih0LnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2VbaF0sMilbMV0pKGUpfX0pKX19LHtrZXk6XCJsZWF2ZU9wZW5Ub3BpY1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY2hhbm5lbHMuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9waWM9PT1lJiYodC5pc0pvaW5lZCgpfHx0LmlzSm9pbmluZygpKX0pKTt0JiYodGhpcy5oYXNMb2dnZXIoKSYmdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwnbGVhdmluZyBkdXBsaWNhdGUgdG9waWMgXCInLmNvbmNhdChlLCdcIicpKSx0LmxlYXZlKCkpfX1dKSxlfSgpLEg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe2ModGhpcyxlKSx0aGlzLmVuZFBvaW50PW51bGwsdGhpcy50b2tlbj1udWxsLHRoaXMuc2tpcEhlYXJ0YmVhdD0hMCx0aGlzLm9ub3Blbj1mdW5jdGlvbigpe30sdGhpcy5vbmVycm9yPWZ1bmN0aW9uKCl7fSx0aGlzLm9ubWVzc2FnZT1mdW5jdGlvbigpe30sdGhpcy5vbmNsb3NlPWZ1bmN0aW9uKCl7fSx0aGlzLnBvbGxFbmRwb2ludD10aGlzLm5vcm1hbGl6ZUVuZHBvaW50KHQpLHRoaXMucmVhZHlTdGF0ZT1wLHRoaXMucG9sbCgpfXJldHVybiBoKGUsW3trZXk6XCJub3JtYWxpemVFbmRwb2ludFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoXCJ3czovL1wiLFwiaHR0cDovL1wiKS5yZXBsYWNlKFwid3NzOi8vXCIsXCJodHRwczovL1wiKS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoLiopL1wiK1ApLFwiJDEvXCIrTyl9fSx7a2V5OlwiZW5kcG9pbnRVUkxcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBELmFwcGVuZFBhcmFtcyh0aGlzLnBvbGxFbmRwb2ludCx7dG9rZW46dGhpcy50b2tlbn0pfX0se2tleTpcImNsb3NlQW5kUmV0cnlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2xvc2UoKSx0aGlzLnJlYWR5U3RhdGU9cH19LHtrZXk6XCJvbnRpbWVvdXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub25lcnJvcihcInRpbWVvdXRcIiksdGhpcy5jbG9zZUFuZFJldHJ5KCl9fSx7a2V5OlwicG9sbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnJlYWR5U3RhdGUhPT12JiZ0aGlzLnJlYWR5U3RhdGUhPT1wfHxELnJlcXVlc3QoXCJHRVRcIix0aGlzLmVuZHBvaW50VVJMKCksXCJhcHBsaWNhdGlvbi9qc29uXCIsbnVsbCx0aGlzLnRpbWVvdXQsdGhpcy5vbnRpbWVvdXQuYmluZCh0aGlzKSwoZnVuY3Rpb24odCl7aWYodCl7dmFyIG49dC5zdGF0dXMsaT10LnRva2VuLG89dC5tZXNzYWdlcztlLnRva2VuPWl9ZWxzZSBuPTA7c3dpdGNoKG4pe2Nhc2UgMjAwOm8uZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIGUub25tZXNzYWdlKHtkYXRhOnR9KX0pKSxlLnBvbGwoKTticmVhaztjYXNlIDIwNDplLnBvbGwoKTticmVhaztjYXNlIDQxMDplLnJlYWR5U3RhdGU9dixlLm9ub3BlbigpLGUucG9sbCgpO2JyZWFrO2Nhc2UgNDAzOmUub25lcnJvcigpLGUuY2xvc2UoKTticmVhaztjYXNlIDA6Y2FzZSA1MDA6ZS5vbmVycm9yKCksZS5jbG9zZUFuZFJldHJ5KCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJ1bmhhbmRsZWQgcG9sbCBzdGF0dXMgXCIuY29uY2F0KG4pKX19KSl9fSx7a2V5Olwic2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7RC5yZXF1ZXN0KFwiUE9TVFwiLHRoaXMuZW5kcG9pbnRVUkwoKSxcImFwcGxpY2F0aW9uL2pzb25cIixlLHRoaXMudGltZW91dCx0aGlzLm9uZXJyb3IuYmluZCh0aGlzLFwidGltZW91dFwiKSwoZnVuY3Rpb24oZSl7ZSYmMjAwPT09ZS5zdGF0dXN8fCh0Lm9uZXJyb3IoZSYmZS5zdGF0dXMpLHQuY2xvc2VBbmRSZXRyeSgpKX0pKX19LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5yZWFkeVN0YXRlPW0sdGhpcy5vbmNsb3NlKCl9fV0pLGV9KCksRD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtjKHRoaXMsZSl9cmV0dXJuIGgoZSxudWxsLFt7a2V5OlwicmVxdWVzdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLGksbyxyLHMpe2lmKGQuWERvbWFpblJlcXVlc3Qpe3ZhciBhPW5ldyBYRG9tYWluUmVxdWVzdDt0aGlzLnhkb21haW5SZXF1ZXN0KGEsZSx0LGksbyxyLHMpfWVsc2V7dmFyIGM9bmV3IGQuWE1MSHR0cFJlcXVlc3Q7dGhpcy54aHJSZXF1ZXN0KGMsZSx0LG4saSxvLHIscyl9fX0se2tleTpcInhkb21haW5SZXF1ZXN0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4saSxvLHIscyl7dmFyIGE9dGhpcztlLnRpbWVvdXQ9byxlLm9wZW4odCxuKSxlLm9ubG9hZD1mdW5jdGlvbigpe3ZhciB0PWEucGFyc2VKU09OKGUucmVzcG9uc2VUZXh0KTtzJiZzKHQpfSxyJiYoZS5vbnRpbWVvdXQ9ciksZS5vbnByb2dyZXNzPWZ1bmN0aW9uKCl7fSxlLnNlbmQoaSl9fSx7a2V5OlwieGhyUmVxdWVzdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuLGksbyxyLHMsYSl7dmFyIGM9dGhpcztlLm9wZW4odCxuLCEwKSxlLnRpbWVvdXQ9cixlLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixpKSxlLm9uZXJyb3I9ZnVuY3Rpb24oKXthJiZhKG51bGwpfSxlLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKGUucmVhZHlTdGF0ZT09PWMuc3RhdGVzLmNvbXBsZXRlJiZhKXt2YXIgdD1jLnBhcnNlSlNPTihlLnJlc3BvbnNlVGV4dCk7YSh0KX19LHMmJihlLm9udGltZW91dD1zKSxlLnNlbmQobyl9fSx7a2V5OlwicGFyc2VKU09OXCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWV8fFwiXCI9PT1lKXJldHVybiBudWxsO3RyeXtyZXR1cm4gSlNPTi5wYXJzZShlKX1jYXRjaCh0KXtyZXR1cm4gY29uc29sZSYmY29uc29sZS5sb2coXCJmYWlsZWQgdG8gcGFyc2UgSlNPTiByZXNwb25zZVwiLGUpLG51bGx9fX0se2tleTpcInNlcmlhbGl6ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49W107Zm9yKHZhciBpIGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eShpKSl7dmFyIHI9dD9cIlwiLmNvbmNhdCh0LFwiW1wiKS5jb25jYXQoaSxcIl1cIik6aSxzPWVbaV07XCJvYmplY3RcIj09PW8ocyk/bi5wdXNoKHRoaXMuc2VyaWFsaXplKHMscikpOm4ucHVzaChlbmNvZGVVUklDb21wb25lbnQocikrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHMpKX1yZXR1cm4gbi5qb2luKFwiJlwiKX19LHtrZXk6XCJhcHBlbmRQYXJhbXNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKDA9PT1PYmplY3Qua2V5cyh0KS5sZW5ndGgpcmV0dXJuIGU7dmFyIG49ZS5tYXRjaCgvXFw/Lyk/XCImXCI6XCI/XCI7cmV0dXJuXCJcIi5jb25jYXQoZSkuY29uY2F0KG4pLmNvbmNhdCh0aGlzLnNlcmlhbGl6ZSh0KSl9fV0pLGV9KCk7RC5zdGF0ZXM9e2NvbXBsZXRlOjR9O3ZhciBCPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt2YXIgbj10aGlzLGk9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2ModGhpcyxlKTt2YXIgbz1pLmV2ZW50c3x8e3N0YXRlOlwicHJlc2VuY2Vfc3RhdGVcIixkaWZmOlwicHJlc2VuY2VfZGlmZlwifTt0aGlzLnN0YXRlPXt9LHRoaXMucGVuZGluZ0RpZmZzPVtdLHRoaXMuY2hhbm5lbD10LHRoaXMuam9pblJlZj1udWxsLHRoaXMuY2FsbGVyPXtvbkpvaW46ZnVuY3Rpb24oKXt9LG9uTGVhdmU6ZnVuY3Rpb24oKXt9LG9uU3luYzpmdW5jdGlvbigpe319LHRoaXMuY2hhbm5lbC5vbihvLnN0YXRlLChmdW5jdGlvbih0KXt2YXIgaT1uLmNhbGxlcixvPWkub25Kb2luLHI9aS5vbkxlYXZlLHM9aS5vblN5bmM7bi5qb2luUmVmPW4uY2hhbm5lbC5qb2luUmVmKCksbi5zdGF0ZT1lLnN5bmNTdGF0ZShuLnN0YXRlLHQsbyxyKSxuLnBlbmRpbmdEaWZmcy5mb3JFYWNoKChmdW5jdGlvbih0KXtuLnN0YXRlPWUuc3luY0RpZmYobi5zdGF0ZSx0LG8scil9KSksbi5wZW5kaW5nRGlmZnM9W10scygpfSkpLHRoaXMuY2hhbm5lbC5vbihvLmRpZmYsKGZ1bmN0aW9uKHQpe3ZhciBpPW4uY2FsbGVyLG89aS5vbkpvaW4scj1pLm9uTGVhdmUscz1pLm9uU3luYztuLmluUGVuZGluZ1N5bmNTdGF0ZSgpP24ucGVuZGluZ0RpZmZzLnB1c2godCk6KG4uc3RhdGU9ZS5zeW5jRGlmZihuLnN0YXRlLHQsbyxyKSxzKCkpfSkpfXJldHVybiBoKGUsW3trZXk6XCJvbkpvaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNhbGxlci5vbkpvaW49ZX19LHtrZXk6XCJvbkxlYXZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jYWxsZXIub25MZWF2ZT1lfX0se2tleTpcIm9uU3luY1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY2FsbGVyLm9uU3luYz1lfX0se2tleTpcImxpc3RcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5saXN0KHRoaXMuc3RhdGUsdCl9fSx7a2V5OlwiaW5QZW5kaW5nU3luY1N0YXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5qb2luUmVmfHx0aGlzLmpvaW5SZWYhPT10aGlzLmNoYW5uZWwuam9pblJlZigpfX1dLFt7a2V5Olwic3luY1N0YXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4saSl7dmFyIG89dGhpcyxyPXRoaXMuY2xvbmUoZSkscz17fSxhPXt9O3JldHVybiB0aGlzLm1hcChyLChmdW5jdGlvbihlLG4pe3RbZV18fChhW2VdPW4pfSkpLHRoaXMubWFwKHQsKGZ1bmN0aW9uKGUsdCl7dmFyIG49cltlXTtpZihuKXt2YXIgaT10Lm1ldGFzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucGh4X3JlZn0pKSxjPW4ubWV0YXMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5waHhfcmVmfSkpLHU9dC5tZXRhcy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBjLmluZGV4T2YoZS5waHhfcmVmKTwwfSkpLGg9bi5tZXRhcy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBpLmluZGV4T2YoZS5waHhfcmVmKTwwfSkpO3UubGVuZ3RoPjAmJihzW2VdPXQsc1tlXS5tZXRhcz11KSxoLmxlbmd0aD4wJiYoYVtlXT1vLmNsb25lKG4pLGFbZV0ubWV0YXM9aCl9ZWxzZSBzW2VdPXR9KSksdGhpcy5zeW5jRGlmZihyLHtqb2luczpzLGxlYXZlczphfSxuLGkpfX0se2tleTpcInN5bmNEaWZmXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4sbyl7dmFyIHI9dC5qb2lucyxzPXQubGVhdmVzLGE9dGhpcy5jbG9uZShlKTtyZXR1cm4gbnx8KG49ZnVuY3Rpb24oKXt9KSxvfHwobz1mdW5jdGlvbigpe30pLHRoaXMubWFwKHIsKGZ1bmN0aW9uKGUsdCl7dmFyIG89YVtlXTtpZihhW2VdPXQsbyl7dmFyIHIscz1hW2VdLm1ldGFzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucGh4X3JlZn0pKSxjPW8ubWV0YXMuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gcy5pbmRleE9mKGUucGh4X3JlZik8MH0pKTsocj1hW2VdLm1ldGFzKS51bnNoaWZ0LmFwcGx5KHIsaShjKSl9bihlLG8sdCl9KSksdGhpcy5tYXAocywoZnVuY3Rpb24oZSx0KXt2YXIgbj1hW2VdO2lmKG4pe3ZhciBpPXQubWV0YXMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5waHhfcmVmfSkpO24ubWV0YXM9bi5tZXRhcy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBpLmluZGV4T2YoZS5waHhfcmVmKTwwfSkpLG8oZSxuLHQpLDA9PT1uLm1ldGFzLmxlbmd0aCYmZGVsZXRlIGFbZV19fSkpLGF9fSx7a2V5OlwibGlzdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fCh0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9KSx0aGlzLm1hcChlLChmdW5jdGlvbihlLG4pe3JldHVybiB0KGUsbil9KSl9fSx7a2V5OlwibWFwXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkubWFwKChmdW5jdGlvbihuKXtyZXR1cm4gdChuLGVbbl0pfSkpfX0se2tleTpcImNsb25lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpfX1dKSxlfSgpLEk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbil7Yyh0aGlzLGUpLHRoaXMuY2FsbGJhY2s9dCx0aGlzLnRpbWVyQ2FsYz1uLHRoaXMudGltZXI9bnVsbCx0aGlzLnRyaWVzPTB9cmV0dXJuIGgoZSxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRyaWVzPTAsY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpfX0se2tleTpcInNjaGVkdWxlVGltZW91dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztjbGVhclRpbWVvdXQodGhpcy50aW1lciksdGhpcy50aW1lcj1zZXRUaW1lb3V0KChmdW5jdGlvbigpe2UudHJpZXM9ZS50cmllcysxLGUuY2FsbGJhY2soKX0pLHRoaXMudGltZXJDYWxjKHRoaXMudHJpZXMrMSkpfX1dKSxlfSgpfV0pfSkpOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../deps/phoenix/priv/static/phoenix.js\n");

/***/ }),

/***/ "./css/app.scss":
/*!**********************!*\
  !*** ./css/app.scss ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jc3MvYXBwLnNjc3MuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jc3MvYXBwLnNjc3M/MjQ1YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./css/app.scss\n");

/***/ }),

/***/ "./node_modules/decode-uri-component/index.js":
/*!****************************************************!*\
  !*** ./node_modules/decode-uri-component/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZGVjb2RlLXVyaS1jb21wb25lbnQvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGVjb2RlLXVyaS1jb21wb25lbnQvaW5kZXguanM/ZjIzNCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG52YXIgdG9rZW4gPSAnJVthLWYwLTldezJ9JztcbnZhciBzaW5nbGVNYXRjaGVyID0gbmV3IFJlZ0V4cCh0b2tlbiwgJ2dpJyk7XG52YXIgbXVsdGlNYXRjaGVyID0gbmV3IFJlZ0V4cCgnKCcgKyB0b2tlbiArICcpKycsICdnaScpO1xuXG5mdW5jdGlvbiBkZWNvZGVDb21wb25lbnRzKGNvbXBvbmVudHMsIHNwbGl0KSB7XG5cdHRyeSB7XG5cdFx0Ly8gVHJ5IHRvIGRlY29kZSB0aGUgZW50aXJlIHN0cmluZyBmaXJzdFxuXHRcdHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY29tcG9uZW50cy5qb2luKCcnKSk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdC8vIERvIG5vdGhpbmdcblx0fVxuXG5cdGlmIChjb21wb25lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHRcdHJldHVybiBjb21wb25lbnRzO1xuXHR9XG5cblx0c3BsaXQgPSBzcGxpdCB8fCAxO1xuXG5cdC8vIFNwbGl0IHRoZSBhcnJheSBpbiAyIHBhcnRzXG5cdHZhciBsZWZ0ID0gY29tcG9uZW50cy5zbGljZSgwLCBzcGxpdCk7XG5cdHZhciByaWdodCA9IGNvbXBvbmVudHMuc2xpY2Uoc3BsaXQpO1xuXG5cdHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmNhbGwoW10sIGRlY29kZUNvbXBvbmVudHMobGVmdCksIGRlY29kZUNvbXBvbmVudHMocmlnaHQpKTtcbn1cblxuZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChpbnB1dCk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdHZhciB0b2tlbnMgPSBpbnB1dC5tYXRjaChzaW5nbGVNYXRjaGVyKTtcblxuXHRcdGZvciAodmFyIGkgPSAxOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpbnB1dCA9IGRlY29kZUNvbXBvbmVudHModG9rZW5zLCBpKS5qb2luKCcnKTtcblxuXHRcdFx0dG9rZW5zID0gaW5wdXQubWF0Y2goc2luZ2xlTWF0Y2hlcik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGlucHV0O1xuXHR9XG59XG5cbmZ1bmN0aW9uIGN1c3RvbURlY29kZVVSSUNvbXBvbmVudChpbnB1dCkge1xuXHQvLyBLZWVwIHRyYWNrIG9mIGFsbCB0aGUgcmVwbGFjZW1lbnRzIGFuZCBwcmVmaWxsIHRoZSBtYXAgd2l0aCB0aGUgYEJPTWBcblx0dmFyIHJlcGxhY2VNYXAgPSB7XG5cdFx0JyVGRSVGRic6ICdcXHVGRkZEXFx1RkZGRCcsXG5cdFx0JyVGRiVGRSc6ICdcXHVGRkZEXFx1RkZGRCdcblx0fTtcblxuXHR2YXIgbWF0Y2ggPSBtdWx0aU1hdGNoZXIuZXhlYyhpbnB1dCk7XG5cdHdoaWxlIChtYXRjaCkge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBEZWNvZGUgYXMgYmlnIGNodW5rcyBhcyBwb3NzaWJsZVxuXHRcdFx0cmVwbGFjZU1hcFttYXRjaFswXV0gPSBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMF0pO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0dmFyIHJlc3VsdCA9IGRlY29kZShtYXRjaFswXSk7XG5cblx0XHRcdGlmIChyZXN1bHQgIT09IG1hdGNoWzBdKSB7XG5cdFx0XHRcdHJlcGxhY2VNYXBbbWF0Y2hbMF1dID0gcmVzdWx0O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG1hdGNoID0gbXVsdGlNYXRjaGVyLmV4ZWMoaW5wdXQpO1xuXHR9XG5cblx0Ly8gQWRkIGAlQzJgIGF0IHRoZSBlbmQgb2YgdGhlIG1hcCB0byBtYWtlIHN1cmUgaXQgZG9lcyBub3QgcmVwbGFjZSB0aGUgY29tYmluYXRvciBiZWZvcmUgZXZlcnl0aGluZyBlbHNlXG5cdHJlcGxhY2VNYXBbJyVDMiddID0gJ1xcdUZGRkQnO1xuXG5cdHZhciBlbnRyaWVzID0gT2JqZWN0LmtleXMocmVwbGFjZU1hcCk7XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Ly8gUmVwbGFjZSBhbGwgZGVjb2RlZCBjb21wb25lbnRzXG5cdFx0dmFyIGtleSA9IGVudHJpZXNbaV07XG5cdFx0aW5wdXQgPSBpbnB1dC5yZXBsYWNlKG5ldyBSZWdFeHAoa2V5LCAnZycpLCByZXBsYWNlTWFwW2tleV0pO1xuXHR9XG5cblx0cmV0dXJuIGlucHV0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlbmNvZGVkVVJJKSB7XG5cdGlmICh0eXBlb2YgZW5jb2RlZFVSSSAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBgZW5jb2RlZFVSSWAgdG8gYmUgb2YgdHlwZSBgc3RyaW5nYCwgZ290IGAnICsgdHlwZW9mIGVuY29kZWRVUkkgKyAnYCcpO1xuXHR9XG5cblx0dHJ5IHtcblx0XHRlbmNvZGVkVVJJID0gZW5jb2RlZFVSSS5yZXBsYWNlKC9cXCsvZywgJyAnKTtcblxuXHRcdC8vIFRyeSB0aGUgYnVpbHQgaW4gZGVjb2RlciBmaXJzdFxuXHRcdHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlZFVSSSk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdC8vIEZhbGxiYWNrIHRvIGEgbW9yZSBhZHZhbmNlZCBkZWNvZGVyXG5cdFx0cmV0dXJuIGN1c3RvbURlY29kZVVSSUNvbXBvbmVudChlbmNvZGVkVVJJKTtcblx0fVxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/decode-uri-component/index.js\n");

/***/ }),

/***/ "./node_modules/filter-obj/index.js":
/*!******************************************!*\
  !*** ./node_modules/filter-obj/index.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nmodule.exports = function (obj, predicate) {\n\tvar ret = {};\n\tvar keys = Object.keys(obj);\n\tvar isArr = Array.isArray(predicate);\n\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tvar key = keys[i];\n\t\tvar val = obj[key];\n\n\t\tif (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {\n\t\t\tret[key] = val;\n\t\t}\n\t}\n\n\treturn ret;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZmlsdGVyLW9iai9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9maWx0ZXItb2JqL2luZGV4LmpzPzczNDgiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCBwcmVkaWNhdGUpIHtcblx0dmFyIHJldCA9IHt9O1xuXHR2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cdHZhciBpc0FyciA9IEFycmF5LmlzQXJyYXkocHJlZGljYXRlKTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIga2V5ID0ga2V5c1tpXTtcblx0XHR2YXIgdmFsID0gb2JqW2tleV07XG5cblx0XHRpZiAoaXNBcnIgPyBwcmVkaWNhdGUuaW5kZXhPZihrZXkpICE9PSAtMSA6IHByZWRpY2F0ZShrZXksIHZhbCwgb2JqKSkge1xuXHRcdFx0cmV0W2tleV0gPSB2YWw7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJldDtcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/filter-obj/index.js\n");

/***/ }),

/***/ "./node_modules/query-string/index.js":
/*!********************************************!*\
  !*** ./node_modules/query-string/index.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nconst strictUriEncode = __webpack_require__(/*! strict-uri-encode */ \"./node_modules/strict-uri-encode/index.js\");\nconst decodeComponent = __webpack_require__(/*! decode-uri-component */ \"./node_modules/decode-uri-component/index.js\");\nconst splitOnFirst = __webpack_require__(/*! split-on-first */ \"./node_modules/split-on-first/index.js\");\nconst filterObject = __webpack_require__(/*! filter-obj */ \"./node_modules/filter-obj/index.js\");\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\tcase 'bracket-separator': {\n\t\t\tconst keyValueSep = options.arrayFormat === 'bracket-separator' ?\n\t\t\t\t'[]=' :\n\t\t\t\t'=';\n\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\t// Translate null to an empty string so that it doesn't serialize as 'null'\n\t\t\t\tvalue = value === null ? '' : value;\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), keyValueSep, encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\t\t}\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));\n\t\t\t\tvalue = isEncodedArray ? decode(value, options) : value;\n\t\t\t\tconst newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tcase 'bracket-separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = /(\\[\\])$/.test(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!isArray) {\n\t\t\t\t\taccumulator[key] = value ? decode(value, options) : value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst arrayValue = value === null ?\n\t\t\t\t\t[] :\n\t\t\t\t\tvalue.split(options.arrayFormatSeparator).map(item => decode(item, options));\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = arrayValue;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], arrayValue);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(query, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn ret;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of query.split('&')) {\n\t\tif (param === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : ['comma', 'separator', 'bracket-separator'].includes(options.arrayFormat) ? value : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ','\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key])) ||\n\t\t(options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const key of Object.keys(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = object[key];\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tif (value.length === 0 && options.arrayFormat === 'bracket-separator') {\n\t\t\t\treturn encode(key, options) + '[]';\n\t\t\t}\n\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (url, options) => {\n\toptions = Object.assign({\n\t\tdecode: true\n\t}, options);\n\n\tconst [url_, hash] = splitOnFirst(url, '#');\n\n\treturn Object.assign(\n\t\t{\n\t\t\turl: url_.split('?')[0] || '',\n\t\t\tquery: parse(extract(url), options)\n\t\t},\n\t\toptions && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}\n\t);\n};\n\nexports.stringifyUrl = (object, options) => {\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true\n\t}, options);\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = exports.extract(object.url);\n\tconst parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});\n\n\tconst query = Object.assign(parsedQueryFromUrl, object.query);\n\tlet queryString = exports.stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(object.url);\n\tif (object.fragmentIdentifier) {\n\t\thash = `#${encode(object.fragmentIdentifier, options)}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n};\n\nexports.pick = (input, filter, options) => {\n\toptions = Object.assign({\n\t\tparseFragmentIdentifier: true\n\t}, options);\n\n\tconst {url, query, fragmentIdentifier} = exports.parseUrl(input, options);\n\treturn exports.stringifyUrl({\n\t\turl,\n\t\tquery: filterObject(query, filter),\n\t\tfragmentIdentifier\n\t}, options);\n};\n\nexports.exclude = (input, filter, options) => {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn exports.pick(input, exclusionFilter, options);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcXVlcnktc3RyaW5nL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3F1ZXJ5LXN0cmluZy9pbmRleC5qcz83MmJmIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmNvbnN0IHN0cmljdFVyaUVuY29kZSA9IHJlcXVpcmUoJ3N0cmljdC11cmktZW5jb2RlJyk7XG5jb25zdCBkZWNvZGVDb21wb25lbnQgPSByZXF1aXJlKCdkZWNvZGUtdXJpLWNvbXBvbmVudCcpO1xuY29uc3Qgc3BsaXRPbkZpcnN0ID0gcmVxdWlyZSgnc3BsaXQtb24tZmlyc3QnKTtcbmNvbnN0IGZpbHRlck9iamVjdCA9IHJlcXVpcmUoJ2ZpbHRlci1vYmonKTtcblxuY29uc3QgaXNOdWxsT3JVbmRlZmluZWQgPSB2YWx1ZSA9PiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBlbmNvZGVyRm9yQXJyYXlGb3JtYXQob3B0aW9ucykge1xuXHRzd2l0Y2ggKG9wdGlvbnMuYXJyYXlGb3JtYXQpIHtcblx0XHRjYXNlICdpbmRleCc6XG5cdFx0XHRyZXR1cm4ga2V5ID0+IChyZXN1bHQsIHZhbHVlKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGluZGV4ID0gcmVzdWx0Lmxlbmd0aDtcblxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0dmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBOdWxsICYmIHZhbHVlID09PSBudWxsKSB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiB2YWx1ZSA9PT0gJycpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgW2VuY29kZShrZXksIG9wdGlvbnMpLCAnWycsIGluZGV4LCAnXSddLmpvaW4oJycpXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0Li4ucmVzdWx0LFxuXHRcdFx0XHRcdFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJ1snLCBlbmNvZGUoaW5kZXgsIG9wdGlvbnMpLCAnXT0nLCBlbmNvZGUodmFsdWUsIG9wdGlvbnMpXS5qb2luKCcnKVxuXHRcdFx0XHRdO1xuXHRcdFx0fTtcblxuXHRcdGNhc2UgJ2JyYWNrZXQnOlxuXHRcdFx0cmV0dXJuIGtleSA9PiAocmVzdWx0LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0dmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBOdWxsICYmIHZhbHVlID09PSBudWxsKSB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiB2YWx1ZSA9PT0gJycpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgW2VuY29kZShrZXksIG9wdGlvbnMpLCAnW10nXS5qb2luKCcnKV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgW2VuY29kZShrZXksIG9wdGlvbnMpLCAnW109JywgZW5jb2RlKHZhbHVlLCBvcHRpb25zKV0uam9pbignJyldO1xuXHRcdFx0fTtcblxuXHRcdGNhc2UgJ2NvbW1hJzpcblx0XHRjYXNlICdzZXBhcmF0b3InOlxuXHRcdGNhc2UgJ2JyYWNrZXQtc2VwYXJhdG9yJzoge1xuXHRcdFx0Y29uc3Qga2V5VmFsdWVTZXAgPSBvcHRpb25zLmFycmF5Rm9ybWF0ID09PSAnYnJhY2tldC1zZXBhcmF0b3InID9cblx0XHRcdFx0J1tdPScgOlxuXHRcdFx0XHQnPSc7XG5cblx0XHRcdHJldHVybiBrZXkgPT4gKHJlc3VsdCwgdmFsdWUpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHZhbHVlID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwTnVsbCAmJiB2YWx1ZSA9PT0gbnVsbCkgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwRW1wdHlTdHJpbmcgJiYgdmFsdWUgPT09ICcnKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhbnNsYXRlIG51bGwgdG8gYW4gZW1wdHkgc3RyaW5nIHNvIHRoYXQgaXQgZG9lc24ndCBzZXJpYWxpemUgYXMgJ251bGwnXG5cdFx0XHRcdHZhbHVlID0gdmFsdWUgPT09IG51bGwgPyAnJyA6IHZhbHVlO1xuXG5cdFx0XHRcdGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFtbZW5jb2RlKGtleSwgb3B0aW9ucyksIGtleVZhbHVlU2VwLCBlbmNvZGUodmFsdWUsIG9wdGlvbnMpXS5qb2luKCcnKV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gW1tyZXN1bHQsIGVuY29kZSh2YWx1ZSwgb3B0aW9ucyldLmpvaW4ob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcildO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGtleSA9PiAocmVzdWx0LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0dmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBOdWxsICYmIHZhbHVlID09PSBudWxsKSB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiB2YWx1ZSA9PT0gJycpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgZW5jb2RlKGtleSwgb3B0aW9ucyldO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJz0nLCBlbmNvZGUodmFsdWUsIG9wdGlvbnMpXS5qb2luKCcnKV07XG5cdFx0XHR9O1xuXHR9XG59XG5cbmZ1bmN0aW9uIHBhcnNlckZvckFycmF5Rm9ybWF0KG9wdGlvbnMpIHtcblx0bGV0IHJlc3VsdDtcblxuXHRzd2l0Y2ggKG9wdGlvbnMuYXJyYXlGb3JtYXQpIHtcblx0XHRjYXNlICdpbmRleCc6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdHJlc3VsdCA9IC9cXFsoXFxkKilcXF0kLy5leGVjKGtleSk7XG5cblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoL1xcW1xcZCpcXF0kLywgJycpO1xuXG5cdFx0XHRcdGlmICghcmVzdWx0KSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0ge307XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldW3Jlc3VsdFsxXV0gPSB2YWx1ZTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0Jzpcblx0XHRcdHJldHVybiAoa2V5LCB2YWx1ZSwgYWNjdW11bGF0b3IpID0+IHtcblx0XHRcdFx0cmVzdWx0ID0gLyhcXFtcXF0pJC8uZXhlYyhrZXkpO1xuXHRcdFx0XHRrZXkgPSBrZXkucmVwbGFjZSgvXFxbXFxdJC8sICcnKTtcblxuXHRcdFx0XHRpZiAoIXJlc3VsdCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYWNjdW11bGF0b3Jba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFt2YWx1ZV07XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFtdLmNvbmNhdChhY2N1bXVsYXRvcltrZXldLCB2YWx1ZSk7XG5cdFx0XHR9O1xuXG5cdFx0Y2FzZSAnY29tbWEnOlxuXHRcdGNhc2UgJ3NlcGFyYXRvcic6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGlzQXJyYXkgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmluY2x1ZGVzKG9wdGlvbnMuYXJyYXlGb3JtYXRTZXBhcmF0b3IpO1xuXHRcdFx0XHRjb25zdCBpc0VuY29kZWRBcnJheSA9ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmICFpc0FycmF5ICYmIGRlY29kZSh2YWx1ZSwgb3B0aW9ucykuaW5jbHVkZXMob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcikpO1xuXHRcdFx0XHR2YWx1ZSA9IGlzRW5jb2RlZEFycmF5ID8gZGVjb2RlKHZhbHVlLCBvcHRpb25zKSA6IHZhbHVlO1xuXHRcdFx0XHRjb25zdCBuZXdWYWx1ZSA9IGlzQXJyYXkgfHwgaXNFbmNvZGVkQXJyYXkgPyB2YWx1ZS5zcGxpdChvcHRpb25zLmFycmF5Rm9ybWF0U2VwYXJhdG9yKS5tYXAoaXRlbSA9PiBkZWNvZGUoaXRlbSwgb3B0aW9ucykpIDogdmFsdWUgPT09IG51bGwgPyB2YWx1ZSA6IGRlY29kZSh2YWx1ZSwgb3B0aW9ucyk7XG5cdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSBuZXdWYWx1ZTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0LXNlcGFyYXRvcic6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGlzQXJyYXkgPSAvKFxcW1xcXSkkLy50ZXN0KGtleSk7XG5cdFx0XHRcdGtleSA9IGtleS5yZXBsYWNlKC9cXFtcXF0kLywgJycpO1xuXG5cdFx0XHRcdGlmICghaXNBcnJheSkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZSA/IGRlY29kZSh2YWx1ZSwgb3B0aW9ucykgOiB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBhcnJheVZhbHVlID0gdmFsdWUgPT09IG51bGwgP1xuXHRcdFx0XHRcdFtdIDpcblx0XHRcdFx0XHR2YWx1ZS5zcGxpdChvcHRpb25zLmFycmF5Rm9ybWF0U2VwYXJhdG9yKS5tYXAoaXRlbSA9PiBkZWNvZGUoaXRlbSwgb3B0aW9ucykpO1xuXG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gYXJyYXlWYWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gW10uY29uY2F0KGFjY3VtdWxhdG9yW2tleV0sIGFycmF5VmFsdWUpO1xuXHRcdFx0fTtcblxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFtdLmNvbmNhdChhY2N1bXVsYXRvcltrZXldLCB2YWx1ZSk7XG5cdFx0XHR9O1xuXHR9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlQXJyYXlGb3JtYXRTZXBhcmF0b3IodmFsdWUpIHtcblx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgfHwgdmFsdWUubGVuZ3RoICE9PSAxKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignYXJyYXlGb3JtYXRTZXBhcmF0b3IgbXVzdCBiZSBzaW5nbGUgY2hhcmFjdGVyIHN0cmluZycpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWx1ZSwgb3B0aW9ucykge1xuXHRpZiAob3B0aW9ucy5lbmNvZGUpIHtcblx0XHRyZXR1cm4gb3B0aW9ucy5zdHJpY3QgPyBzdHJpY3RVcmlFbmNvZGUodmFsdWUpIDogZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gZGVjb2RlKHZhbHVlLCBvcHRpb25zKSB7XG5cdGlmIChvcHRpb25zLmRlY29kZSkge1xuXHRcdHJldHVybiBkZWNvZGVDb21wb25lbnQodmFsdWUpO1xuXHR9XG5cblx0cmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBrZXlzU29ydGVyKGlucHV0KSB7XG5cdGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHRcdHJldHVybiBpbnB1dC5zb3J0KCk7XG5cdH1cblxuXHRpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0Jykge1xuXHRcdHJldHVybiBrZXlzU29ydGVyKE9iamVjdC5rZXlzKGlucHV0KSlcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBOdW1iZXIoYSkgLSBOdW1iZXIoYikpXG5cdFx0XHQubWFwKGtleSA9PiBpbnB1dFtrZXldKTtcblx0fVxuXG5cdHJldHVybiBpbnB1dDtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSGFzaChpbnB1dCkge1xuXHRjb25zdCBoYXNoU3RhcnQgPSBpbnB1dC5pbmRleE9mKCcjJyk7XG5cdGlmIChoYXNoU3RhcnQgIT09IC0xKSB7XG5cdFx0aW5wdXQgPSBpbnB1dC5zbGljZSgwLCBoYXNoU3RhcnQpO1xuXHR9XG5cblx0cmV0dXJuIGlucHV0O1xufVxuXG5mdW5jdGlvbiBnZXRIYXNoKHVybCkge1xuXHRsZXQgaGFzaCA9ICcnO1xuXHRjb25zdCBoYXNoU3RhcnQgPSB1cmwuaW5kZXhPZignIycpO1xuXHRpZiAoaGFzaFN0YXJ0ICE9PSAtMSkge1xuXHRcdGhhc2ggPSB1cmwuc2xpY2UoaGFzaFN0YXJ0KTtcblx0fVxuXG5cdHJldHVybiBoYXNoO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0KGlucHV0KSB7XG5cdGlucHV0ID0gcmVtb3ZlSGFzaChpbnB1dCk7XG5cdGNvbnN0IHF1ZXJ5U3RhcnQgPSBpbnB1dC5pbmRleE9mKCc/Jyk7XG5cdGlmIChxdWVyeVN0YXJ0ID09PSAtMSkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdHJldHVybiBpbnB1dC5zbGljZShxdWVyeVN0YXJ0ICsgMSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVmFsdWUodmFsdWUsIG9wdGlvbnMpIHtcblx0aWYgKG9wdGlvbnMucGFyc2VOdW1iZXJzICYmICFOdW1iZXIuaXNOYU4oTnVtYmVyKHZhbHVlKSkgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUudHJpbSgpICE9PSAnJykpIHtcblx0XHR2YWx1ZSA9IE51bWJlcih2YWx1ZSk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5wYXJzZUJvb2xlYW5zICYmIHZhbHVlICE9PSBudWxsICYmICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgfHwgdmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJykpIHtcblx0XHR2YWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gcGFyc2UocXVlcnksIG9wdGlvbnMpIHtcblx0b3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuXHRcdGRlY29kZTogdHJ1ZSxcblx0XHRzb3J0OiB0cnVlLFxuXHRcdGFycmF5Rm9ybWF0OiAnbm9uZScsXG5cdFx0YXJyYXlGb3JtYXRTZXBhcmF0b3I6ICcsJyxcblx0XHRwYXJzZU51bWJlcnM6IGZhbHNlLFxuXHRcdHBhcnNlQm9vbGVhbnM6IGZhbHNlXG5cdH0sIG9wdGlvbnMpO1xuXG5cdHZhbGlkYXRlQXJyYXlGb3JtYXRTZXBhcmF0b3Iob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcik7XG5cblx0Y29uc3QgZm9ybWF0dGVyID0gcGFyc2VyRm9yQXJyYXlGb3JtYXQob3B0aW9ucyk7XG5cblx0Ly8gQ3JlYXRlIGFuIG9iamVjdCB3aXRoIG5vIHByb3RvdHlwZVxuXHRjb25zdCByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5cdGlmICh0eXBlb2YgcXVlcnkgIT09ICdzdHJpbmcnKSB7XG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXG5cdHF1ZXJ5ID0gcXVlcnkudHJpbSgpLnJlcGxhY2UoL15bPyMmXS8sICcnKTtcblxuXHRpZiAoIXF1ZXJ5KSB7XG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXG5cdGZvciAoY29uc3QgcGFyYW0gb2YgcXVlcnkuc3BsaXQoJyYnKSkge1xuXHRcdGlmIChwYXJhbSA9PT0gJycpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGxldCBba2V5LCB2YWx1ZV0gPSBzcGxpdE9uRmlyc3Qob3B0aW9ucy5kZWNvZGUgPyBwYXJhbS5yZXBsYWNlKC9cXCsvZywgJyAnKSA6IHBhcmFtLCAnPScpO1xuXG5cdFx0Ly8gTWlzc2luZyBgPWAgc2hvdWxkIGJlIGBudWxsYDpcblx0XHQvLyBodHRwOi8vdzMub3JnL1RSLzIwMTIvV0QtdXJsLTIwMTIwNTI0LyNjb2xsZWN0LXVybC1wYXJhbWV0ZXJzXG5cdFx0dmFsdWUgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IFsnY29tbWEnLCAnc2VwYXJhdG9yJywgJ2JyYWNrZXQtc2VwYXJhdG9yJ10uaW5jbHVkZXMob3B0aW9ucy5hcnJheUZvcm1hdCkgPyB2YWx1ZSA6IGRlY29kZSh2YWx1ZSwgb3B0aW9ucyk7XG5cdFx0Zm9ybWF0dGVyKGRlY29kZShrZXksIG9wdGlvbnMpLCB2YWx1ZSwgcmV0KTtcblx0fVxuXG5cdGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHJldCkpIHtcblx0XHRjb25zdCB2YWx1ZSA9IHJldFtrZXldO1xuXHRcdGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsKSB7XG5cdFx0XHRmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XG5cdFx0XHRcdHZhbHVlW2tdID0gcGFyc2VWYWx1ZSh2YWx1ZVtrXSwgb3B0aW9ucyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldFtrZXldID0gcGFyc2VWYWx1ZSh2YWx1ZSwgb3B0aW9ucyk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc29ydCA9PT0gZmFsc2UpIHtcblx0XHRyZXR1cm4gcmV0O1xuXHR9XG5cblx0cmV0dXJuIChvcHRpb25zLnNvcnQgPT09IHRydWUgPyBPYmplY3Qua2V5cyhyZXQpLnNvcnQoKSA6IE9iamVjdC5rZXlzKHJldCkuc29ydChvcHRpb25zLnNvcnQpKS5yZWR1Y2UoKHJlc3VsdCwga2V5KSA9PiB7XG5cdFx0Y29uc3QgdmFsdWUgPSByZXRba2V5XTtcblx0XHRpZiAoQm9vbGVhbih2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdC8vIFNvcnQgb2JqZWN0IGtleXMsIG5vdCB2YWx1ZXNcblx0XHRcdHJlc3VsdFtrZXldID0ga2V5c1NvcnRlcih2YWx1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdFtrZXldID0gdmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSwgT2JqZWN0LmNyZWF0ZShudWxsKSk7XG59XG5cbmV4cG9ydHMuZXh0cmFjdCA9IGV4dHJhY3Q7XG5leHBvcnRzLnBhcnNlID0gcGFyc2U7XG5cbmV4cG9ydHMuc3RyaW5naWZ5ID0gKG9iamVjdCwgb3B0aW9ucykgPT4ge1xuXHRpZiAoIW9iamVjdCkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcblx0XHRlbmNvZGU6IHRydWUsXG5cdFx0c3RyaWN0OiB0cnVlLFxuXHRcdGFycmF5Rm9ybWF0OiAnbm9uZScsXG5cdFx0YXJyYXlGb3JtYXRTZXBhcmF0b3I6ICcsJ1xuXHR9LCBvcHRpb25zKTtcblxuXHR2YWxpZGF0ZUFycmF5Rm9ybWF0U2VwYXJhdG9yKG9wdGlvbnMuYXJyYXlGb3JtYXRTZXBhcmF0b3IpO1xuXG5cdGNvbnN0IHNob3VsZEZpbHRlciA9IGtleSA9PiAoXG5cdFx0KG9wdGlvbnMuc2tpcE51bGwgJiYgaXNOdWxsT3JVbmRlZmluZWQob2JqZWN0W2tleV0pKSB8fFxuXHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiBvYmplY3Rba2V5XSA9PT0gJycpXG5cdCk7XG5cblx0Y29uc3QgZm9ybWF0dGVyID0gZW5jb2RlckZvckFycmF5Rm9ybWF0KG9wdGlvbnMpO1xuXG5cdGNvbnN0IG9iamVjdENvcHkgPSB7fTtcblxuXHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvYmplY3QpKSB7XG5cdFx0aWYgKCFzaG91bGRGaWx0ZXIoa2V5KSkge1xuXHRcdFx0b2JqZWN0Q29weVtrZXldID0gb2JqZWN0W2tleV07XG5cdFx0fVxuXHR9XG5cblx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdENvcHkpO1xuXG5cdGlmIChvcHRpb25zLnNvcnQgIT09IGZhbHNlKSB7XG5cdFx0a2V5cy5zb3J0KG9wdGlvbnMuc29ydCk7XG5cdH1cblxuXHRyZXR1cm4ga2V5cy5tYXAoa2V5ID0+IHtcblx0XHRjb25zdCB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXG5cdFx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiAnJztcblx0XHR9XG5cblx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdHJldHVybiBlbmNvZGUoa2V5LCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdGlmICh2YWx1ZS5sZW5ndGggPT09IDAgJiYgb3B0aW9ucy5hcnJheUZvcm1hdCA9PT0gJ2JyYWNrZXQtc2VwYXJhdG9yJykge1xuXHRcdFx0XHRyZXR1cm4gZW5jb2RlKGtleSwgb3B0aW9ucykgKyAnW10nO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmFsdWVcblx0XHRcdFx0LnJlZHVjZShmb3JtYXR0ZXIoa2V5KSwgW10pXG5cdFx0XHRcdC5qb2luKCcmJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVuY29kZShrZXksIG9wdGlvbnMpICsgJz0nICsgZW5jb2RlKHZhbHVlLCBvcHRpb25zKTtcblx0fSkuZmlsdGVyKHggPT4geC5sZW5ndGggPiAwKS5qb2luKCcmJyk7XG59O1xuXG5leHBvcnRzLnBhcnNlVXJsID0gKHVybCwgb3B0aW9ucykgPT4ge1xuXHRvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG5cdFx0ZGVjb2RlOiB0cnVlXG5cdH0sIG9wdGlvbnMpO1xuXG5cdGNvbnN0IFt1cmxfLCBoYXNoXSA9IHNwbGl0T25GaXJzdCh1cmwsICcjJyk7XG5cblx0cmV0dXJuIE9iamVjdC5hc3NpZ24oXG5cdFx0e1xuXHRcdFx0dXJsOiB1cmxfLnNwbGl0KCc/JylbMF0gfHwgJycsXG5cdFx0XHRxdWVyeTogcGFyc2UoZXh0cmFjdCh1cmwpLCBvcHRpb25zKVxuXHRcdH0sXG5cdFx0b3B0aW9ucyAmJiBvcHRpb25zLnBhcnNlRnJhZ21lbnRJZGVudGlmaWVyICYmIGhhc2ggPyB7ZnJhZ21lbnRJZGVudGlmaWVyOiBkZWNvZGUoaGFzaCwgb3B0aW9ucyl9IDoge31cblx0KTtcbn07XG5cbmV4cG9ydHMuc3RyaW5naWZ5VXJsID0gKG9iamVjdCwgb3B0aW9ucykgPT4ge1xuXHRvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG5cdFx0ZW5jb2RlOiB0cnVlLFxuXHRcdHN0cmljdDogdHJ1ZVxuXHR9LCBvcHRpb25zKTtcblxuXHRjb25zdCB1cmwgPSByZW1vdmVIYXNoKG9iamVjdC51cmwpLnNwbGl0KCc/JylbMF0gfHwgJyc7XG5cdGNvbnN0IHF1ZXJ5RnJvbVVybCA9IGV4cG9ydHMuZXh0cmFjdChvYmplY3QudXJsKTtcblx0Y29uc3QgcGFyc2VkUXVlcnlGcm9tVXJsID0gZXhwb3J0cy5wYXJzZShxdWVyeUZyb21VcmwsIHtzb3J0OiBmYWxzZX0pO1xuXG5cdGNvbnN0IHF1ZXJ5ID0gT2JqZWN0LmFzc2lnbihwYXJzZWRRdWVyeUZyb21VcmwsIG9iamVjdC5xdWVyeSk7XG5cdGxldCBxdWVyeVN0cmluZyA9IGV4cG9ydHMuc3RyaW5naWZ5KHF1ZXJ5LCBvcHRpb25zKTtcblx0aWYgKHF1ZXJ5U3RyaW5nKSB7XG5cdFx0cXVlcnlTdHJpbmcgPSBgPyR7cXVlcnlTdHJpbmd9YDtcblx0fVxuXG5cdGxldCBoYXNoID0gZ2V0SGFzaChvYmplY3QudXJsKTtcblx0aWYgKG9iamVjdC5mcmFnbWVudElkZW50aWZpZXIpIHtcblx0XHRoYXNoID0gYCMke2VuY29kZShvYmplY3QuZnJhZ21lbnRJZGVudGlmaWVyLCBvcHRpb25zKX1gO1xuXHR9XG5cblx0cmV0dXJuIGAke3VybH0ke3F1ZXJ5U3RyaW5nfSR7aGFzaH1gO1xufTtcblxuZXhwb3J0cy5waWNrID0gKGlucHV0LCBmaWx0ZXIsIG9wdGlvbnMpID0+IHtcblx0b3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuXHRcdHBhcnNlRnJhZ21lbnRJZGVudGlmaWVyOiB0cnVlXG5cdH0sIG9wdGlvbnMpO1xuXG5cdGNvbnN0IHt1cmwsIHF1ZXJ5LCBmcmFnbWVudElkZW50aWZpZXJ9ID0gZXhwb3J0cy5wYXJzZVVybChpbnB1dCwgb3B0aW9ucyk7XG5cdHJldHVybiBleHBvcnRzLnN0cmluZ2lmeVVybCh7XG5cdFx0dXJsLFxuXHRcdHF1ZXJ5OiBmaWx0ZXJPYmplY3QocXVlcnksIGZpbHRlciksXG5cdFx0ZnJhZ21lbnRJZGVudGlmaWVyXG5cdH0sIG9wdGlvbnMpO1xufTtcblxuZXhwb3J0cy5leGNsdWRlID0gKGlucHV0LCBmaWx0ZXIsIG9wdGlvbnMpID0+IHtcblx0Y29uc3QgZXhjbHVzaW9uRmlsdGVyID0gQXJyYXkuaXNBcnJheShmaWx0ZXIpID8ga2V5ID0+ICFmaWx0ZXIuaW5jbHVkZXMoa2V5KSA6IChrZXksIHZhbHVlKSA9PiAhZmlsdGVyKGtleSwgdmFsdWUpO1xuXG5cdHJldHVybiBleHBvcnRzLnBpY2soaW5wdXQsIGV4Y2x1c2lvbkZpbHRlciwgb3B0aW9ucyk7XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/query-string/index.js\n");

/***/ }),

/***/ "./node_modules/split-on-first/index.js":
/*!**********************************************!*\
  !*** ./node_modules/split-on-first/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3BsaXQtb24tZmlyc3QvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3BsaXQtb24tZmlyc3QvaW5kZXguanM/ZjMyYyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gKHN0cmluZywgc2VwYXJhdG9yKSA9PiB7XG5cdGlmICghKHR5cGVvZiBzdHJpbmcgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBzZXBhcmF0b3IgPT09ICdzdHJpbmcnKSkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIHRoZSBhcmd1bWVudHMgdG8gYmUgb2YgdHlwZSBgc3RyaW5nYCcpO1xuXHR9XG5cblx0aWYgKHNlcGFyYXRvciA9PT0gJycpIHtcblx0XHRyZXR1cm4gW3N0cmluZ107XG5cdH1cblxuXHRjb25zdCBzZXBhcmF0b3JJbmRleCA9IHN0cmluZy5pbmRleE9mKHNlcGFyYXRvcik7XG5cblx0aWYgKHNlcGFyYXRvckluZGV4ID09PSAtMSkge1xuXHRcdHJldHVybiBbc3RyaW5nXTtcblx0fVxuXG5cdHJldHVybiBbXG5cdFx0c3RyaW5nLnNsaWNlKDAsIHNlcGFyYXRvckluZGV4KSxcblx0XHRzdHJpbmcuc2xpY2Uoc2VwYXJhdG9ySW5kZXggKyBzZXBhcmF0b3IubGVuZ3RoKVxuXHRdO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/split-on-first/index.js\n");

/***/ }),

/***/ "./node_modules/strict-uri-encode/index.js":
/*!*************************************************!*\
  !*** ./node_modules/strict-uri-encode/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3RyaWN0LXVyaS1lbmNvZGUvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3RyaWN0LXVyaS1lbmNvZGUvaW5kZXguanM/NjQ1MyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IHN0ciA9PiBlbmNvZGVVUklDb21wb25lbnQoc3RyKS5yZXBsYWNlKC9bIScoKSpdL2csIHggPT4gYCUke3guY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKX1gKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/strict-uri-encode/index.js\n");

/***/ }),

/***/ "./src/consts.ts":
/*!***********************!*\
  !*** ./src/consts.ts ***!
  \***********************/
/*! exports provided: MEDIA_CONSTRAINTS, LOCAL_PEER_ID */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MEDIA_CONSTRAINTS\", function() { return MEDIA_CONSTRAINTS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LOCAL_PEER_ID\", function() { return LOCAL_PEER_ID; });\nvar MEDIA_CONSTRAINTS = {\n    audio: true,\n    video: { width: 640, height: 360, frameRate: 24 },\n};\nvar LOCAL_PEER_ID = \"local-peer\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29uc3RzLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnN0cy50cz9jZTE4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgTUVESUFfQ09OU1RSQUlOVFMgPSB7XG4gICAgYXVkaW86IHRydWUsXG4gICAgdmlkZW86IHsgd2lkdGg6IDY0MCwgaGVpZ2h0OiAzNjAsIGZyYW1lUmF0ZTogMjQgfSxcbn07XG5leHBvcnQgdmFyIExPQ0FMX1BFRVJfSUQgPSBcImxvY2FsLXBlZXJcIjtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/consts.ts\n");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _room__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./room */ \"./src/room.ts\");\n\nvar room = new _room__WEBPACK_IMPORTED_MODULE_0__[\"Room\"]();\nroom.init().then(function () { return room.join(); });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXgudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHM/MmFjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb29tIH0gZnJvbSBcIi4vcm9vbVwiO1xudmFyIHJvb20gPSBuZXcgUm9vbSgpO1xucm9vbS5pbml0KCkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiByb29tLmpvaW4oKTsgfSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.ts\n");

/***/ }),

/***/ "./src/room.ts":
/*!*********************!*\
  !*** ./src/room.ts ***!
  \*********************/
/*! exports provided: Room */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Room\", function() { return Room; });\n/* harmony import */ var _css_app_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../css/app.scss */ \"./css/app.scss\");\n/* harmony import */ var _css_app_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_app_scss__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _consts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./consts */ \"./src/consts.ts\");\n/* harmony import */ var _room_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./room_ui */ \"./src/room_ui.ts\");\n/* harmony import */ var membrane_rtc_engine__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! membrane_rtc_engine */ \"../deps/membrane_rtc_engine/priv/static/index.js\");\n/* harmony import */ var membrane_rtc_engine__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(membrane_rtc_engine__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var phoenix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! phoenix */ \"../deps/phoenix/priv/static/phoenix.js\");\n/* harmony import */ var phoenix__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(phoenix__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! query-string */ \"./node_modules/query-string/index.js\");\n/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(query_string__WEBPACK_IMPORTED_MODULE_5__);\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\nvar Room = /** @class */ (function () {\n    function Room() {\n        var _this = this;\n        this.peers = [];\n        this.webrtcSocketRefs = [];\n        this.init = function () { return __awaiter(_this, void 0, void 0, function () {\n            var _a, error_1;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        _a = this;\n                        return [4 /*yield*/, navigator.mediaDevices.getUserMedia(_consts__WEBPACK_IMPORTED_MODULE_1__[\"MEDIA_CONSTRAINTS\"])];\n                    case 1:\n                        _a.localStream = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        error_1 = _b.sent();\n                        console.error(error_1);\n                        Object(_room_ui__WEBPACK_IMPORTED_MODULE_2__[\"setErrorMessage\"])(\"Failed to setup video room, make sure to grant camera and microphone permissions\");\n                        throw \"error\";\n                    case 3:\n                        Object(_room_ui__WEBPACK_IMPORTED_MODULE_2__[\"addVideoElement\"])(_consts__WEBPACK_IMPORTED_MODULE_1__[\"LOCAL_PEER_ID\"], \"Me\", true);\n                        Object(_room_ui__WEBPACK_IMPORTED_MODULE_2__[\"attachStream\"])(this.localStream, _consts__WEBPACK_IMPORTED_MODULE_1__[\"LOCAL_PEER_ID\"]);\n                        return [4 /*yield*/, this.phoenixChannelPushResult(this.webrtcChannel.join())];\n                    case 4:\n                        _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        this.join = function () {\n            Object(_room_ui__WEBPACK_IMPORTED_MODULE_2__[\"setupDisconnectButton\"])(function () {\n                _this.leave();\n                window.location.replace(\"\");\n            });\n            _this.webrtc.join({ displayName: _this.displayName });\n        };\n        this.leave = function () {\n            _this.webrtc.leave();\n            _this.webrtcChannel.leave();\n            _this.socket.off(_this.webrtcSocketRefs);\n            while (_this.webrtcSocketRefs.length > 0) {\n                _this.webrtcSocketRefs.pop();\n            }\n        };\n        this.parseUrl = function () {\n            var displayName = Object(query_string__WEBPACK_IMPORTED_MODULE_5__[\"parse\"])(document.location.search).display_name;\n            // remove query params without reloading the page\n            window.history.replaceState(null, \"\", window.location.pathname);\n            return displayName;\n        };\n        this.updateParticipantsList = function () {\n            var participantsNames = _this.peers.map(function (p) { return p.metadata.displayName; });\n            if (_this.displayName) {\n                participantsNames.push(_this.displayName);\n            }\n            Object(_room_ui__WEBPACK_IMPORTED_MODULE_2__[\"setParticipantsList\"])(participantsNames);\n        };\n        this.phoenixChannelPushResult = function (push) { return __awaiter(_this, void 0, Promise, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        push\n                            .receive(\"ok\", function (response) { return resolve(response); })\n                            .receive(\"error\", function (response) { return reject(response); });\n                    })];\n            });\n        }); };\n        this.socket = new phoenix__WEBPACK_IMPORTED_MODULE_4__[\"Socket\"](\"/socket\");\n        this.socket.connect();\n        this.displayName = this.parseUrl();\n        this.webrtcChannel = this.socket.channel(\"room:\" + Object(_room_ui__WEBPACK_IMPORTED_MODULE_2__[\"getRoomId\"])());\n        this.webrtcSocketRefs.push(this.socket.onError(this.leave));\n        this.webrtcSocketRefs.push(this.socket.onClose(this.leave));\n        this.webrtc = new membrane_rtc_engine__WEBPACK_IMPORTED_MODULE_3__[\"MembraneWebRTC\"]({\n            callbacks: {\n                onSendMediaEvent: function (mediaEvent) {\n                    _this.webrtcChannel.push(\"mediaEvent\", { data: mediaEvent });\n                },\n                onConnectionError: _room_ui__WEBPACK_IMPORTED_MODULE_2__[\"setErrorMessage\"],\n                onJoinSuccess: function (peerId, peersInRoom) {\n                    _this.localStream.getTracks().forEach(function (track) {\n                        return _this.webrtc.addTrack(track, _this.localStream);\n                    });\n                    _this.peers = peersInRoom;\n                    _this.peers.forEach(function (peer) {\n                        Object(_room_ui__WEBPACK_IMPORTED_MODULE_2__[\"addVideoElement\"])(peer.id, peer.metadata.displayName, false);\n                    });\n                    _this.updateParticipantsList();\n                },\n                onJoinError: function (metadata) {\n                    throw \"Peer denied.\";\n                },\n                onTrackReady: function (_a) {\n                    var stream = _a.stream, peer = _a.peer, metadata = _a.metadata;\n                    Object(_room_ui__WEBPACK_IMPORTED_MODULE_2__[\"attachStream\"])(stream, peer.id);\n                },\n                onTrackAdded: function (ctx) { },\n                onTrackRemoved: function (ctx) { },\n                onPeerJoined: function (peer) {\n                    _this.peers.push(peer);\n                    _this.updateParticipantsList();\n                    Object(_room_ui__WEBPACK_IMPORTED_MODULE_2__[\"addVideoElement\"])(peer.id, peer.metadata.displayName, false);\n                },\n                onPeerLeft: function (peer) {\n                    _this.peers = _this.peers.filter(function (p) { return p.id !== peer.id; });\n                    Object(_room_ui__WEBPACK_IMPORTED_MODULE_2__[\"removeVideoElement\"])(peer.id);\n                    _this.updateParticipantsList();\n                },\n                onPeerUpdated: function (ctx) { },\n            },\n        });\n        this.webrtcChannel.on(\"mediaEvent\", function (event) {\n            return _this.webrtc.receiveMediaEvent(event.data);\n        });\n    }\n    return Room;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm9vbS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9yb29tLnRzP2ZmM2QiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbmltcG9ydCBcIi4uL2Nzcy9hcHAuc2Nzc1wiO1xuaW1wb3J0IHsgTUVESUFfQ09OU1RSQUlOVFMsIExPQ0FMX1BFRVJfSUQgfSBmcm9tIFwiLi9jb25zdHNcIjtcbmltcG9ydCB7IGFkZFZpZGVvRWxlbWVudCwgZ2V0Um9vbUlkLCByZW1vdmVWaWRlb0VsZW1lbnQsIHNldEVycm9yTWVzc2FnZSwgc2V0UGFydGljaXBhbnRzTGlzdCwgYXR0YWNoU3RyZWFtLCBzZXR1cERpc2Nvbm5lY3RCdXR0b24sIH0gZnJvbSBcIi4vcm9vbV91aVwiO1xuaW1wb3J0IHsgTWVtYnJhbmVXZWJSVEMsIH0gZnJvbSBcIm1lbWJyYW5lX3J0Y19lbmdpbmVcIjtcbmltcG9ydCB7IFNvY2tldCB9IGZyb20gXCJwaG9lbml4XCI7XG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gXCJxdWVyeS1zdHJpbmdcIjtcbnZhciBSb29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJvb20oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMucGVlcnMgPSBbXTtcbiAgICAgICAgdGhpcy53ZWJydGNTb2NrZXRSZWZzID0gW107XG4gICAgICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYSwgZXJyb3JfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShNRURJQV9DT05TVFJBSU5UUyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sb2NhbFN0cmVhbSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEVycm9yTWVzc2FnZShcIkZhaWxlZCB0byBzZXR1cCB2aWRlbyByb29tLCBtYWtlIHN1cmUgdG8gZ3JhbnQgY2FtZXJhIGFuZCBtaWNyb3Bob25lIHBlcm1pc3Npb25zXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJlcnJvclwiO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRWaWRlb0VsZW1lbnQoTE9DQUxfUEVFUl9JRCwgXCJNZVwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaFN0cmVhbSh0aGlzLmxvY2FsU3RyZWFtLCBMT0NBTF9QRUVSX0lEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucGhvZW5peENoYW5uZWxQdXNoUmVzdWx0KHRoaXMud2VicnRjQ2hhbm5lbC5qb2luKCkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgdGhpcy5qb2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0dXBEaXNjb25uZWN0QnV0dG9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5sZWF2ZSgpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKFwiXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfdGhpcy53ZWJydGMuam9pbih7IGRpc3BsYXlOYW1lOiBfdGhpcy5kaXNwbGF5TmFtZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5sZWF2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLndlYnJ0Yy5sZWF2ZSgpO1xuICAgICAgICAgICAgX3RoaXMud2VicnRjQ2hhbm5lbC5sZWF2ZSgpO1xuICAgICAgICAgICAgX3RoaXMuc29ja2V0Lm9mZihfdGhpcy53ZWJydGNTb2NrZXRSZWZzKTtcbiAgICAgICAgICAgIHdoaWxlIChfdGhpcy53ZWJydGNTb2NrZXRSZWZzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBfdGhpcy53ZWJydGNTb2NrZXRSZWZzLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBhcnNlVXJsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRpc3BsYXlOYW1lID0gcGFyc2UoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoKS5kaXNwbGF5X25hbWU7XG4gICAgICAgICAgICAvLyByZW1vdmUgcXVlcnkgcGFyYW1zIHdpdGhvdXQgcmVsb2FkaW5nIHRoZSBwYWdlXG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgXCJcIiwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBkaXNwbGF5TmFtZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHNMaXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhcnRpY2lwYW50c05hbWVzID0gX3RoaXMucGVlcnMubWFwKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLm1ldGFkYXRhLmRpc3BsYXlOYW1lOyB9KTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50c05hbWVzLnB1c2goX3RoaXMuZGlzcGxheU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0UGFydGljaXBhbnRzTGlzdChwYXJ0aWNpcGFudHNOYW1lcyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucGhvZW5peENoYW5uZWxQdXNoUmVzdWx0ID0gZnVuY3Rpb24gKHB1c2gpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCBQcm9taXNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVjZWl2ZShcIm9rXCIsIGZ1bmN0aW9uIChyZXNwb25zZSkgeyByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsgcmV0dXJuIHJlamVjdChyZXNwb25zZSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHRoaXMuc29ja2V0ID0gbmV3IFNvY2tldChcIi9zb2NrZXRcIik7XG4gICAgICAgIHRoaXMuc29ja2V0LmNvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IHRoaXMucGFyc2VVcmwoKTtcbiAgICAgICAgdGhpcy53ZWJydGNDaGFubmVsID0gdGhpcy5zb2NrZXQuY2hhbm5lbChcInJvb206XCIgKyBnZXRSb29tSWQoKSk7XG4gICAgICAgIHRoaXMud2VicnRjU29ja2V0UmVmcy5wdXNoKHRoaXMuc29ja2V0Lm9uRXJyb3IodGhpcy5sZWF2ZSkpO1xuICAgICAgICB0aGlzLndlYnJ0Y1NvY2tldFJlZnMucHVzaCh0aGlzLnNvY2tldC5vbkNsb3NlKHRoaXMubGVhdmUpKTtcbiAgICAgICAgdGhpcy53ZWJydGMgPSBuZXcgTWVtYnJhbmVXZWJSVEMoe1xuICAgICAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgICAgICAgb25TZW5kTWVkaWFFdmVudDogZnVuY3Rpb24gKG1lZGlhRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMud2VicnRjQ2hhbm5lbC5wdXNoKFwibWVkaWFFdmVudFwiLCB7IGRhdGE6IG1lZGlhRXZlbnQgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNvbm5lY3Rpb25FcnJvcjogc2V0RXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgIG9uSm9pblN1Y2Nlc3M6IGZ1bmN0aW9uIChwZWVySWQsIHBlZXJzSW5Sb29tKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmxvY2FsU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMud2VicnRjLmFkZFRyYWNrKHRyYWNrLCBfdGhpcy5sb2NhbFN0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZWVycyA9IHBlZXJzSW5Sb29tO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wZWVycy5mb3JFYWNoKGZ1bmN0aW9uIChwZWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRWaWRlb0VsZW1lbnQocGVlci5pZCwgcGVlci5tZXRhZGF0YS5kaXNwbGF5TmFtZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlUGFydGljaXBhbnRzTGlzdCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25Kb2luRXJyb3I6IGZ1bmN0aW9uIChtZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIlBlZXIgZGVuaWVkLlwiO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25UcmFja1JlYWR5OiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cmVhbSA9IF9hLnN0cmVhbSwgcGVlciA9IF9hLnBlZXIsIG1ldGFkYXRhID0gX2EubWV0YWRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaFN0cmVhbShzdHJlYW0sIHBlZXIuaWQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25UcmFja0FkZGVkOiBmdW5jdGlvbiAoY3R4KSB7IH0sXG4gICAgICAgICAgICAgICAgb25UcmFja1JlbW92ZWQ6IGZ1bmN0aW9uIChjdHgpIHsgfSxcbiAgICAgICAgICAgICAgICBvblBlZXJKb2luZWQ6IGZ1bmN0aW9uIChwZWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBlZXJzLnB1c2gocGVlcik7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVBhcnRpY2lwYW50c0xpc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkVmlkZW9FbGVtZW50KHBlZXIuaWQsIHBlZXIubWV0YWRhdGEuZGlzcGxheU5hbWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uUGVlckxlZnQ6IGZ1bmN0aW9uIChwZWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBlZXJzID0gX3RoaXMucGVlcnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLmlkICE9PSBwZWVyLmlkOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVmlkZW9FbGVtZW50KHBlZXIuaWQpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVQYXJ0aWNpcGFudHNMaXN0KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvblBlZXJVcGRhdGVkOiBmdW5jdGlvbiAoY3R4KSB7IH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy53ZWJydGNDaGFubmVsLm9uKFwibWVkaWFFdmVudFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy53ZWJydGMucmVjZWl2ZU1lZGlhRXZlbnQoZXZlbnQuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gUm9vbTtcbn0oKSk7XG5leHBvcnQgeyBSb29tIH07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/room.ts\n");

/***/ }),

/***/ "./src/room_ui.ts":
/*!************************!*\
  !*** ./src/room_ui.ts ***!
  \************************/
/*! exports provided: getRoomId, setupDisconnectButton, attachStream, addVideoElement, setParticipantsList, removeVideoElement, setErrorMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getRoomId\", function() { return getRoomId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupDisconnectButton\", function() { return setupDisconnectButton; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"attachStream\", function() { return attachStream; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addVideoElement\", function() { return addVideoElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setParticipantsList\", function() { return setParticipantsList; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"removeVideoElement\", function() { return removeVideoElement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setErrorMessage\", function() { return setErrorMessage; });\nfunction getRoomId() {\n    return document.getElementById(\"room\").dataset.roomId;\n}\nfunction setupDisconnectButton(fun) {\n    var disconnectButton = document.getElementById(\"disconnect\");\n    disconnectButton.onclick = fun;\n}\nfunction elementId(peerId, type) {\n    return type + \"-\" + peerId;\n}\nfunction attachStream(stream, peerId) {\n    var videoId = elementId(peerId, \"video\");\n    var audioId = elementId(peerId, \"audio\");\n    var video = document.getElementById(videoId);\n    var audio = document.getElementById(audioId);\n    video.srcObject = stream;\n    audio.srcObject = stream;\n}\nfunction addVideoElement(peerId, label, isLocalVideo) {\n    var videoId = elementId(peerId, \"video\");\n    var audioId = elementId(peerId, \"audio\");\n    var video = document.getElementById(videoId);\n    var audio = document.getElementById(audioId);\n    if (!video && !audio) {\n        var values = setupVideoFeed(peerId, label, isLocalVideo);\n        video = values.video;\n        audio = values.audio;\n    }\n    video.id = videoId;\n    video.autoplay = true;\n    video.playsInline = true;\n    video.muted = true;\n    audio.id = audioId;\n    audio.autoplay = true;\n    if (isLocalVideo) {\n        audio.muted = true;\n    }\n}\nfunction setParticipantsList(participants) {\n    var participantsNamesEl = document.getElementById(\"participants-list\");\n    participantsNamesEl.innerHTML =\n        \"<b>Participants</b>: \" + participants.join(\", \");\n}\nfunction resizeVideosGrid() {\n    var grid = document.getElementById(\"videos-grid\");\n    grid.className = \"grid-\" + Math.min(2, grid.children.length);\n}\nfunction setupVideoFeed(peerId, label, isLocalVideo) {\n    var copy = document.querySelector(\"#video-feed-template\").content.cloneNode(true);\n    var feed = copy.querySelector(\"div[class='VideoFeed']\");\n    var audio = feed.querySelector(\"audio\");\n    var video = feed.querySelector(\"video\");\n    var videoLabel = feed.querySelector(\"div[class='VideoLabel']\");\n    feed.id = elementId(peerId, \"feed\");\n    videoLabel.innerText = label;\n    if (isLocalVideo) {\n        video.classList.add(\"UserOwnVideo\");\n    }\n    var grid = document.querySelector(\"#videos-grid\");\n    grid.appendChild(feed);\n    resizeVideosGrid();\n    return { audio: audio, video: video };\n}\nfunction removeVideoElement(peerId) {\n    var _a;\n    (_a = document.getElementById(elementId(peerId, \"feed\"))) === null || _a === void 0 ? void 0 : _a.remove();\n    resizeVideosGrid();\n}\nfunction setErrorMessage(message) {\n    if (message === void 0) { message = \"Cannot connect to server, refresh the page and try again\"; }\n    var errorContainer = document.getElementById(\"videochat-error\");\n    if (errorContainer) {\n        errorContainer.innerHTML = message;\n        errorContainer.style.display = \"block\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm9vbV91aS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9yb29tX3VpLnRzPzg2NTEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGdldFJvb21JZCgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyb29tXCIpLmRhdGFzZXQucm9vbUlkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwRGlzY29ubmVjdEJ1dHRvbihmdW4pIHtcbiAgICB2YXIgZGlzY29ubmVjdEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzY29ubmVjdFwiKTtcbiAgICBkaXNjb25uZWN0QnV0dG9uLm9uY2xpY2sgPSBmdW47XG59XG5mdW5jdGlvbiBlbGVtZW50SWQocGVlcklkLCB0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGUgKyBcIi1cIiArIHBlZXJJZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhdHRhY2hTdHJlYW0oc3RyZWFtLCBwZWVySWQpIHtcbiAgICB2YXIgdmlkZW9JZCA9IGVsZW1lbnRJZChwZWVySWQsIFwidmlkZW9cIik7XG4gICAgdmFyIGF1ZGlvSWQgPSBlbGVtZW50SWQocGVlcklkLCBcImF1ZGlvXCIpO1xuICAgIHZhciB2aWRlbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHZpZGVvSWQpO1xuICAgIHZhciBhdWRpbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGF1ZGlvSWQpO1xuICAgIHZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTtcbiAgICBhdWRpby5zcmNPYmplY3QgPSBzdHJlYW07XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkVmlkZW9FbGVtZW50KHBlZXJJZCwgbGFiZWwsIGlzTG9jYWxWaWRlbykge1xuICAgIHZhciB2aWRlb0lkID0gZWxlbWVudElkKHBlZXJJZCwgXCJ2aWRlb1wiKTtcbiAgICB2YXIgYXVkaW9JZCA9IGVsZW1lbnRJZChwZWVySWQsIFwiYXVkaW9cIik7XG4gICAgdmFyIHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodmlkZW9JZCk7XG4gICAgdmFyIGF1ZGlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXVkaW9JZCk7XG4gICAgaWYgKCF2aWRlbyAmJiAhYXVkaW8pIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IHNldHVwVmlkZW9GZWVkKHBlZXJJZCwgbGFiZWwsIGlzTG9jYWxWaWRlbyk7XG4gICAgICAgIHZpZGVvID0gdmFsdWVzLnZpZGVvO1xuICAgICAgICBhdWRpbyA9IHZhbHVlcy5hdWRpbztcbiAgICB9XG4gICAgdmlkZW8uaWQgPSB2aWRlb0lkO1xuICAgIHZpZGVvLmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICB2aWRlby5wbGF5c0lubGluZSA9IHRydWU7XG4gICAgdmlkZW8ubXV0ZWQgPSB0cnVlO1xuICAgIGF1ZGlvLmlkID0gYXVkaW9JZDtcbiAgICBhdWRpby5hdXRvcGxheSA9IHRydWU7XG4gICAgaWYgKGlzTG9jYWxWaWRlbykge1xuICAgICAgICBhdWRpby5tdXRlZCA9IHRydWU7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHNldFBhcnRpY2lwYW50c0xpc3QocGFydGljaXBhbnRzKSB7XG4gICAgdmFyIHBhcnRpY2lwYW50c05hbWVzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhcnRpY2lwYW50cy1saXN0XCIpO1xuICAgIHBhcnRpY2lwYW50c05hbWVzRWwuaW5uZXJIVE1MID1cbiAgICAgICAgXCI8Yj5QYXJ0aWNpcGFudHM8L2I+OiBcIiArIHBhcnRpY2lwYW50cy5qb2luKFwiLCBcIik7XG59XG5mdW5jdGlvbiByZXNpemVWaWRlb3NHcmlkKCkge1xuICAgIHZhciBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb3MtZ3JpZFwiKTtcbiAgICBncmlkLmNsYXNzTmFtZSA9IFwiZ3JpZC1cIiArIE1hdGgubWluKDIsIGdyaWQuY2hpbGRyZW4ubGVuZ3RoKTtcbn1cbmZ1bmN0aW9uIHNldHVwVmlkZW9GZWVkKHBlZXJJZCwgbGFiZWwsIGlzTG9jYWxWaWRlbykge1xuICAgIHZhciBjb3B5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN2aWRlby1mZWVkLXRlbXBsYXRlXCIpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgIHZhciBmZWVkID0gY29weS5xdWVyeVNlbGVjdG9yKFwiZGl2W2NsYXNzPSdWaWRlb0ZlZWQnXVwiKTtcbiAgICB2YXIgYXVkaW8gPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoXCJhdWRpb1wiKTtcbiAgICB2YXIgdmlkZW8gPSBmZWVkLnF1ZXJ5U2VsZWN0b3IoXCJ2aWRlb1wiKTtcbiAgICB2YXIgdmlkZW9MYWJlbCA9IGZlZWQucXVlcnlTZWxlY3RvcihcImRpdltjbGFzcz0nVmlkZW9MYWJlbCddXCIpO1xuICAgIGZlZWQuaWQgPSBlbGVtZW50SWQocGVlcklkLCBcImZlZWRcIik7XG4gICAgdmlkZW9MYWJlbC5pbm5lclRleHQgPSBsYWJlbDtcbiAgICBpZiAoaXNMb2NhbFZpZGVvKSB7XG4gICAgICAgIHZpZGVvLmNsYXNzTGlzdC5hZGQoXCJVc2VyT3duVmlkZW9cIik7XG4gICAgfVxuICAgIHZhciBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN2aWRlb3MtZ3JpZFwiKTtcbiAgICBncmlkLmFwcGVuZENoaWxkKGZlZWQpO1xuICAgIHJlc2l6ZVZpZGVvc0dyaWQoKTtcbiAgICByZXR1cm4geyBhdWRpbzogYXVkaW8sIHZpZGVvOiB2aWRlbyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVZpZGVvRWxlbWVudChwZWVySWQpIHtcbiAgICB2YXIgX2E7XG4gICAgKF9hID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKHBlZXJJZCwgXCJmZWVkXCIpKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlbW92ZSgpO1xuICAgIHJlc2l6ZVZpZGVvc0dyaWQoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRFcnJvck1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IFwiQ2Fubm90IGNvbm5lY3QgdG8gc2VydmVyLCByZWZyZXNoIHRoZSBwYWdlIGFuZCB0cnkgYWdhaW5cIjsgfVxuICAgIHZhciBlcnJvckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9jaGF0LWVycm9yXCIpO1xuICAgIGlmIChlcnJvckNvbnRhaW5lcikge1xuICAgICAgICBlcnJvckNvbnRhaW5lci5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgICBlcnJvckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/room_ui.ts\n");

/***/ })

/******/ });